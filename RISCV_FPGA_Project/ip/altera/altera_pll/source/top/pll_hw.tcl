# (C) 2001-2013 Altera Corporation. All rights reserved.
# Your use of Altera Corporation's design tools, logic functions and other 
# software and tools, and its AMPP partner logic functions, and any output 
# files any of the foregoing (including device programming or simulation 
# files), and any associated documentation or information are expressly subject 
# to the terms and conditions of the Altera Program License Subscription 
# Agreement, Altera MegaCore Function License Agreement, or other applicable 
# license agreement, including, without limitation, that your use is for the 
# sole purpose of programming logic devices manufactured by Altera and sold by 
# Altera or its authorized distributors.  Please refer to the applicable 
# agreement for further details.


# (C) 2001-2010 Altera Corporation. All rights reserved.
# Your use of Altera Corporation's design tools, logic functions and other 
# software and tools, and its AMPP partner logic functions, and any output 
# files any of the foregoing (including device programming or simulation 
# files), and any associated documentation or information are expressly subject 
# to the terms and conditions of the Altera Program License Subscription 
# Agreement, Altera MegaCore Function License Agreement, or other applicable 
# license agreement, including, without limitation, that your use is for the 
# sole purpose of programming logic devices manufactured by Altera and sold by 
# Altera or its authorized distributors.  Please refer to the applicable 
# agreement for further details.


# TCL File Generated by Component Editor 9.1
# Wed Jul 01 15:56:26 PDT 2009
# DO NOT MODIFY


# +-----------------------------------
# | 
# | pll "pll" v1.0
# | null 2009.11.05.13:57:30
# | 
# | 
# | D:/stratixv_pll/q10.0_58_acds/pll.v
# | 
# |    ./pll.v syn, sim
# | 
# +-----------------------------------

# +-----------------------------------
# | request TCL package from ACDS 10.0
# | 
package require -exact qsys 13.1
# | 
# +-----------------------------------
# +-----------------------------------
#added
package require ::altera::generic_pll

#declare constants for widths
set reconf_width 64
set max_M_HI_DIV 256
set max_C_HI_DIV 256
set max_N_HI_DIV 256
set max_M_LO_DIV 256
set max_C_LO_DIV 256
set max_N_LO_DIV 256

# +-----------------------------------
# | module pll
# | 
set_module_property NAME altera_pll
set_module_property VERSION 13.1
set_module_property INTERNAL false
set_module_property GROUP "PLL"
set_module_property AUTHOR "Altera Corporation"
set_module_property DISPLAY_NAME "Altera PLL"
set_module_property DESCRIPTION "Altera Phase-Locked Loop (ALTERA_PLL)"
set_module_property DATASHEET_URL "http://www.altera.com/literature/ug/altera_pll.pdf"
set_module_property EDITABLE true
set_module_property SUPPORTED_DEVICE_FAMILIES {"STRATIX V" "ARRIA V" "ARRIA V GZ" "ARRIA 10" "CYCLONE V"}

# | 
# +-----------------------------------

# +-----------------------------------
add_display_item "" "General" GROUP tab
add_display_item "" "Clock Switchover" GROUP tab
add_display_item "" "Cascading" GROUP tab
add_display_item "" "MIF Streaming" GROUP tab
add_display_item "" "Settings" GROUP tab
add_display_item "" "Advanced Parameters" GROUP tab
# +-----------------------------------

# +-----------------------------------
# | parameters
# |
## debug settings
add_parameter debug_print_output boolean 0
set_parameter_property debug_print_output DEFAULT_VALUE 0
set_parameter_property debug_print_output VISIBLE false
set_parameter_property debug_print_output AFFECTS_GENERATION false
set_parameter_property debug_print_output HDL_PARAMETER false

add_parameter debug_use_rbc_taf_method boolean 0
set_parameter_property debug_use_rbc_taf_method DEFAULT_VALUE 0
set_parameter_property debug_use_rbc_taf_method VISIBLE false
set_parameter_property debug_use_rbc_taf_method AFFECTS_GENERATION false
set_parameter_property debug_use_rbc_taf_method HDL_PARAMETER false

## setting for General pll
#####
add_parameter device_family STRING 
set_parameter_property device_family VISIBLE false
set_parameter_property device_family SYSTEM_INFO {DEVICE_FAMILY}
set_parameter_property device_family AFFECTS_GENERATION false

add_parameter device STRING
set_parameter_property device VISIBLE false
set_parameter_property device SYSTEM_INFO {DEVICE}
set_parameter_property device AFFECTS_GENERATION false

add_parameter gui_device_speed_grade STRING "General"
set_parameter_property gui_device_speed_grade DEFAULT_VALUE "2"
set_parameter_property gui_device_speed_grade DISPLAY_NAME "Device Speed Grade"
set_parameter_property gui_device_speed_grade UNITS None
set_parameter_property gui_device_speed_grade DISPLAY_HINT ""
set_parameter_property gui_device_speed_grade AFFECTS_GENERATION true
set_parameter_property gui_device_speed_grade HDL_PARAMETER false
set_parameter_property gui_device_speed_grade DESCRIPTION "Specifies the speed grade for a device."
add_display_item "General" gui_device_speed_grade parameter 

add_parameter gui_pll_mode STRING "General"
set_parameter_property gui_pll_mode DEFAULT_VALUE "Integer-N PLL"
set_parameter_property gui_pll_mode DISPLAY_NAME "PLL Mode"
set_parameter_property gui_pll_mode ALLOWED_RANGES {"Integer-N PLL" "Fractional-N PLL"}
set_parameter_property gui_pll_mode UNITS None
set_parameter_property gui_pll_mode DISPLAY_HINT ""
set_parameter_property gui_pll_mode AFFECTS_GENERATION true
set_parameter_property gui_pll_mode HDL_PARAMETER false
set_parameter_property gui_pll_mode DESCRIPTION "Specifies the PLL mode for Altera PLL"
add_display_item "General" gui_pll_mode parameter  

add_parameter fractional_vco_multiplier boolean 0
set_parameter_property fractional_vco_multiplier DEFAULT_VALUE 0
set_parameter_property fractional_vco_multiplier VISIBLE false
set_parameter_property fractional_vco_multiplier AFFECTS_GENERATION true
set_parameter_property fractional_vco_multiplier DERIVED true
set_parameter_property fractional_vco_multiplier ENABLED true
set_parameter_property fractional_vco_multiplier HDL_PARAMETER false

add_parameter gui_reference_clock_frequency FLOAT "100.0"
set_parameter_property gui_reference_clock_frequency DEFAULT_VALUE "100.0"
set_parameter_property gui_reference_clock_frequency DISPLAY_NAME "Reference Clock Frequency"
set_parameter_property gui_reference_clock_frequency UNITS "megahertz"
set_parameter_property gui_reference_clock_frequency DISPLAY_HINT ""
set_parameter_property gui_reference_clock_frequency AFFECTS_GENERATION true
set_parameter_property gui_reference_clock_frequency HDL_PARAMETER false
set_parameter_property gui_reference_clock_frequency DESCRIPTION "Specifies the reference clock frequency for Altera PLL"
add_display_item "General" gui_reference_clock_frequency parameter 
set_parameter_update_callback gui_reference_clock_frequency round_frequency_to_six_decimals

add_parameter reference_clock_frequency STRING "0 MHz"
set_parameter_property reference_clock_frequency DEFAULT_VALUE "0 MHz"
set_parameter_property reference_clock_frequency VISIBLE false
set_parameter_property reference_clock_frequency AFFECTS_GENERATION true
set_parameter_property reference_clock_frequency DERIVED true
set_parameter_property reference_clock_frequency HDL_PARAMETER false
add_display_item "General" reference_clock_frequency parameter 

add_parameter gui_channel_spacing FLOAT "0.0"
set_parameter_property gui_channel_spacing DEFAULT_VALUE "0.0"
set_parameter_property gui_channel_spacing DISPLAY_NAME "Channel Spacing"
set_parameter_property gui_channel_spacing UNITS "kilohertz"
set_parameter_property gui_channel_spacing DISPLAY_HINT ""
set_parameter_property gui_channel_spacing AFFECTS_GENERATION true
set_parameter_property gui_channel_spacing HDL_PARAMETER false
set_parameter_property gui_channel_spacing DESCRIPTION "Specifies the channel spacing for Altera PLL"
add_display_item "General" gui_channel_spacing parameter 
set_parameter_update_callback gui_channel_spacing round_frequency_to_six_decimals

## setting for Compensation Mode
add_parameter gui_operation_mode STRING "direct"
set_parameter_property gui_operation_mode DEFAULT_VALUE "direct"
set_parameter_property gui_operation_mode DISPLAY_NAME "Operation Mode"
set_parameter_property gui_operation_mode ALLOWED_RANGES {"direct" "external feedback" "normal" "source synchronous" "zero delay buffer" "lvds"}
set_parameter_property gui_operation_mode UNITS None
set_parameter_property gui_operation_mode DISPLAY_HINT ""
set_parameter_property gui_operation_mode AFFECTS_GENERATION true
set_parameter_property gui_operation_mode HDL_PARAMETER false
set_parameter_property gui_operation_mode DESCRIPTION "Specifies the compensation modes for Altera PLL"
add_display_item "General" gui_operation_mode parameter 

add_parameter gui_feedback_clock STRING "Global Clock"
set_parameter_property gui_feedback_clock DEFAULT_VALUE "Global Clock"
set_parameter_property gui_feedback_clock DISPLAY_NAME "Feedback Clock"
set_parameter_property gui_feedback_clock ALLOWED_RANGES {"Global Clock" "Regional Clock"}
set_parameter_property gui_feedback_clock UNITS None
set_parameter_property gui_feedback_clock DISPLAY_HINT ""
set_parameter_property gui_feedback_clock AFFECTS_GENERATION true
set_parameter_property gui_feedback_clock HDL_PARAMETER false
set_parameter_property gui_feedback_clock DESCRIPTION "Specifies the feedback clock used "
add_display_item "General" gui_feedback_clock parameter 

## adding a drop down to choose fractional carry out parameter
add_parameter gui_fractional_cout INTEGER 32
set_parameter_property gui_fractional_cout DEFAULT_VALUE 32
set_parameter_property gui_fractional_cout DISPLAY_NAME "Fractional carry out"
set_parameter_property gui_fractional_cout ALLOWED_RANGES {8 16 24 32}
set_parameter_property gui_fractional_cout UNITS None
set_parameter_property gui_fractional_cout DISPLAY_HINT ""
set_parameter_property gui_fractional_cout AFFECTS_GENERATION false
set_parameter_property gui_fractional_cout HDL_PARAMETER false
set_parameter_property gui_fractional_cout DESCRIPTION "Specifies the fractional carry out for the DSM mode for Altera PLL. The fractional carry determines the denominator in the equation K/2^Fcout"
add_display_item "General" gui_fractional_cout parameter 

## adding a drop down to choose fractional carry out parameter
add_parameter pll_fractional_cout INTEGER 32
set_parameter_property pll_fractional_cout DEFAULT_VALUE 32
set_parameter_property pll_fractional_cout ALLOWED_RANGES {8 16 24 32}
set_parameter_property pll_fractional_cout ENABLED false
set_parameter_property pll_fractional_cout DERIVED true
set_parameter_property pll_fractional_cout VISIBLE false
set_parameter_property pll_fractional_cout AFFECTS_GENERATION true
set_parameter_property pll_fractional_cout IS_HDL_PARAMETER false
add_display_item "General" pll_fractional_cout parameter 

## adding a drop down to choose fractional carry out parameter
add_parameter gui_dsm_out_sel STRING "1st_order"
set_parameter_property gui_dsm_out_sel DEFAULT_VALUE "1st_order"
set_parameter_property gui_dsm_out_sel DISPLAY_NAME "DSM Order"
set_parameter_property gui_dsm_out_sel ALLOWED_RANGES {"1st_order" "2nd_order" "3rd_order" "disable"}
set_parameter_property gui_dsm_out_sel UNITS None
set_parameter_property gui_dsm_out_sel DISPLAY_HINT ""
set_parameter_property gui_dsm_out_sel AFFECTS_GENERATION false
set_parameter_property gui_dsm_out_sel HDL_PARAMETER false
set_parameter_property gui_dsm_out_sel DESCRIPTION "Specifies the DSM order for shifting the fractional noise to high frequencies to be filtered out by the PLL"
add_display_item "General" gui_dsm_out_sel parameter 

## adding a drop down to choose fractional carry out parameter
add_parameter pll_dsm_out_sel STRING "1st_order"
set_parameter_property pll_dsm_out_sel DEFAULT_VALUE "1st_order"
set_parameter_property pll_dsm_out_sel ALLOWED_RANGES {"1st_order" "2nd_order" "3rd_order" "disable"}
set_parameter_property pll_dsm_out_sel ENABLED false
set_parameter_property pll_dsm_out_sel DERIVED true
set_parameter_property pll_dsm_out_sel VISIBLE false
set_parameter_property pll_dsm_out_sel AFFECTS_GENERATION true
set_parameter_property pll_dsm_out_sel IS_HDL_PARAMETER false
add_display_item "General" pll_dsm_out_sel parameter 

add_parameter operation_mode STRING "direct"
set_parameter_property operation_mode DEFAULT_VALUE "direct"
set_parameter_property operation_mode VISIBLE false
set_parameter_property operation_mode ALLOWED_RANGES {"direct" "external feedback" "external" "normal" "source synchronous" "source_synchronous" "zero delay buffer" "zdb" "lvds"}
set_parameter_property operation_mode AFFECTS_GENERATION true
set_parameter_property operation_mode DERIVED true
set_parameter_property operation_mode HDL_PARAMETER false

add_parameter gui_use_locked boolean 1
set_parameter_property gui_use_locked DEFAULT_VALUE 1
set_parameter_property gui_use_locked DISPLAY_NAME "Enable locked output port"
set_parameter_property gui_use_locked UNITS None
set_parameter_property gui_use_locked DISPLAY_HINT ""
set_parameter_property gui_use_locked AFFECTS_GENERATION true
set_parameter_property gui_use_locked IS_HDL_PARAMETER false
set_parameter_property gui_use_locked DESCRIPTION "Turn on this parameter to enable the locked port"
add_display_item "General" gui_use_locked parameter 

add_parameter gui_en_adv_params boolean 0
set_parameter_property gui_en_adv_params DEFAULT_VALUE 0
set_parameter_property gui_en_adv_params DISPLAY_NAME "Enable physical output clock parameters"
set_parameter_property gui_en_adv_params UNITS None
set_parameter_property gui_en_adv_params DISPLAY_HINT ""
set_parameter_property gui_en_adv_params AFFECTS_GENERATION true
set_parameter_property gui_en_adv_params IS_HDL_PARAMETER false
set_parameter_property gui_en_adv_params DESCRIPTION "Turn on this parameter to allow the entering of physical PLL parameters instead of specifying an output clock frequency."
add_display_item "General" gui_en_adv_params parameter 

add_display_item "General" "Output Clocks" GROUP
add_parameter gui_number_of_clocks INTEGER 1
set_parameter_property gui_number_of_clocks DEFAULT_VALUE 1
set_parameter_property gui_number_of_clocks DISPLAY_NAME "Number Of Clocks"
set_parameter_property gui_number_of_clocks UNITS None
set_parameter_property gui_number_of_clocks ALLOWED_RANGES {1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18}
set_parameter_property gui_number_of_clocks DISPLAY_HINT ""
set_parameter_property gui_number_of_clocks AFFECTS_GENERATION true
set_parameter_property gui_number_of_clocks HDL_PARAMETER false
set_parameter_property gui_number_of_clocks DESCRIPTION "Specifies the number of output clocks required in the ALTERA_PLL design"
add_display_item "Output Clocks" gui_number_of_clocks parameter

add_parameter number_of_clocks INTEGER 1
set_parameter_property number_of_clocks DEFAULT_VALUE 1
set_parameter_property number_of_clocks VISIBLE false
set_parameter_property number_of_clocks ALLOWED_RANGES {1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18}
set_parameter_property number_of_clocks AFFECTS_GENERATION true
set_parameter_property number_of_clocks DERIVED true
set_parameter_property number_of_clocks HDL_PARAMETER false

add_parameter number_of_cascade_counters INTEGER 0
set_parameter_property number_of_cascade_counters DEFAULT_VALUE 0
set_parameter_property number_of_cascade_counters VISIBLE false
set_parameter_property number_of_cascade_counters ALLOWED_RANGES {0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17}
set_parameter_property number_of_cascade_counters AFFECTS_GENERATION false
set_parameter_property number_of_cascade_counters DERIVED true
set_parameter_property number_of_cascade_counters HDL_PARAMETER false

add_parameter gui_multiply_factor INTEGER "1"
set_parameter_property gui_multiply_factor DEFAULT_VALUE "1"
set_parameter_property gui_multiply_factor DISPLAY_NAME "Multiply Factor (M-Counter)"
set_parameter_property gui_multiply_factor UNITS ""
set_parameter_property gui_multiply_factor VISIBLE false
set_parameter_property gui_multiply_factor ALLOWED_RANGES {1:512}
set_parameter_property gui_multiply_factor AFFECTS_GENERATION true
set_parameter_property gui_multiply_factor HDL_PARAMETER false
set_parameter_property gui_multiply_factor DESCRIPTION "Specifies requested value for the multiply factor on the M counter"
add_display_item "Output Clocks" gui_multiply_factor parameter

add_parameter gui_frac_multiply_factor LONG "1"
set_parameter_property gui_frac_multiply_factor DEFAULT_VALUE "1"
set_parameter_property gui_frac_multiply_factor DISPLAY_NAME "Fractional Multiply Factor (K)"
set_parameter_property gui_frac_multiply_factor UNITS ""
set_parameter_property gui_frac_multiply_factor ALLOWED_RANGES {1:4294967296}
set_parameter_property gui_frac_multiply_factor VISIBLE false
set_parameter_property gui_frac_multiply_factor AFFECTS_GENERATION true
set_parameter_property gui_frac_multiply_factor HDL_PARAMETER false
set_parameter_property gui_frac_multiply_factor DESCRIPTION "Specifies requested value for the fractional multiply factor"
add_display_item "Output Clocks" gui_frac_multiply_factor parameter

add_parameter gui_divide_factor_n INTEGER "1"
set_parameter_property gui_divide_factor_n DEFAULT_VALUE "1"
set_parameter_property gui_divide_factor_n DISPLAY_NAME "Divide Factor (N-Counter)"
set_parameter_property gui_divide_factor_n UNITS ""
set_parameter_property gui_divide_factor_n ALLOWED_RANGES {1:512}
set_parameter_property gui_divide_factor_n VISIBLE false
set_parameter_property gui_divide_factor_n AFFECTS_GENERATION true
set_parameter_property gui_divide_factor_n HDL_PARAMETER false
set_parameter_property gui_divide_factor_n DESCRIPTION "Specifies requested value for the divide factor on the N counter"
add_display_item "Output Clocks" gui_divide_factor_n parameter


for { set i 0 } {$i < 18} {incr i} {
add_display_item "Output Clocks" "outclk$i" GROUP

add_parameter gui_cascade_counter$i BOOLEAN 0
set_parameter_property gui_cascade_counter$i DEFAULT_VALUE 0
set_parameter_property gui_cascade_counter$i DISPLAY_NAME "Make this a cascade counter"
set_parameter_property gui_cascade_counter$i DISPLAY_UNITS ""
set_parameter_property gui_cascade_counter$i UNITS None
set_parameter_property gui_cascade_counter$i DISPLAY_HINT BOOLEAN
set_parameter_property gui_cascade_counter$i VISIBLE false
set_parameter_property gui_cascade_counter$i AFFECTS_ELABORATION true
set_parameter_property gui_cascade_counter$i AFFECTS_GENERATION true
set_parameter_property gui_cascade_counter$i HDL_PARAMETER false
set_parameter_property gui_cascade_counter$i DESCRIPTION "Setting this parameter causes this counter to be used to cascade into the next output counter rather than as an outclk.  This feature can be used to achieve large division factors."
add_display_item "outclk$i" gui_cascade_counter$i parameter

add_parameter gui_output_clock_frequency$i FLOAT "100.0"
set_parameter_property gui_output_clock_frequency$i DEFAULT_VALUE "100.0"
set_parameter_property gui_output_clock_frequency$i DISPLAY_NAME "Desired Frequency"
set_parameter_property gui_output_clock_frequency$i UNITS "megahertz"
set_parameter_property gui_output_clock_frequency$i VISIBLE false
set_parameter_property gui_output_clock_frequency$i AFFECTS_GENERATION true
set_parameter_property gui_output_clock_frequency$i HDL_PARAMETER false
set_parameter_property gui_output_clock_frequency$i DESCRIPTION "Specifies requested value for output clock frequency"
add_display_item "outclk$i" gui_output_clock_frequency$i parameter 
set_parameter_update_callback gui_output_clock_frequency$i round_frequency_to_six_decimals

add_parameter gui_divide_factor_c$i INTEGER "1"
set_parameter_property gui_divide_factor_c$i DEFAULT_VALUE "1"
set_parameter_property gui_divide_factor_c$i DISPLAY_NAME "Divide Factor (C-Counter)"
set_parameter_property gui_divide_factor_c$i UNITS ""
set_parameter_property gui_divide_factor_c$i ALLOWED_RANGES {1:512}
set_parameter_property gui_divide_factor_c$i VISIBLE false
set_parameter_property gui_divide_factor_c$i AFFECTS_GENERATION true
set_parameter_property gui_divide_factor_c$i HDL_PARAMETER false
set_parameter_property gui_divide_factor_c$i DESCRIPTION "Specifies requested value for the divide factor for the output clock"
add_display_item "outclk$i" gui_divide_factor_c$i parameter

add_parameter gui_actual_multiply_factor$i INTEGER "1"
set_parameter_property gui_actual_multiply_factor$i DEFAULT_VALUE "1"
set_parameter_property gui_actual_multiply_factor$i DISPLAY_NAME "Actual Multiply Factor"
set_parameter_property gui_actual_multiply_factor$i UNITS ""
set_parameter_property gui_actual_multiply_factor$i VISIBLE false
set_parameter_property gui_actual_multiply_factor$i DERIVED true
set_parameter_property gui_actual_multiply_factor$i AFFECTS_GENERATION true
set_parameter_property gui_actual_multiply_factor$i HDL_PARAMETER false
set_parameter_property gui_actual_multiply_factor$i DESCRIPTION "Specifies actual value for the multiply factor for the output clock"
add_display_item "outclk$i" gui_actual_multiply_factor$i parameter

add_parameter gui_actual_frac_multiply_factor$i LONG "1"
set_parameter_property gui_actual_frac_multiply_factor$i DEFAULT_VALUE "1"
set_parameter_property gui_actual_frac_multiply_factor$i DISPLAY_NAME "Actual Fractional Multiply Factor (K)"
set_parameter_property gui_actual_frac_multiply_factor$i UNITS ""
set_parameter_property gui_actual_frac_multiply_factor$i VISIBLE false
set_parameter_property gui_actual_frac_multiply_factor$i DERIVED true
set_parameter_property gui_actual_frac_multiply_factor$i AFFECTS_GENERATION true
set_parameter_property gui_actual_frac_multiply_factor$i HDL_PARAMETER false
set_parameter_property gui_actual_frac_multiply_factor$i DESCRIPTION "Specifies actual value for the fractional multiply factor for the output clock"
add_display_item "outclk$i" gui_actual_frac_multiply_factor$i parameter

add_parameter gui_actual_divide_factor$i INTEGER "1"
set_parameter_property gui_actual_divide_factor$i DEFAULT_VALUE "1"
set_parameter_property gui_actual_divide_factor$i DISPLAY_NAME "Actual Divide Factor"
set_parameter_property gui_actual_divide_factor$i UNITS ""
set_parameter_property gui_actual_divide_factor$i VISIBLE false
set_parameter_property gui_actual_divide_factor$i DERIVED true
set_parameter_property gui_actual_divide_factor$i AFFECTS_GENERATION true
set_parameter_property gui_actual_divide_factor$i HDL_PARAMETER false
set_parameter_property gui_actual_divide_factor$i DESCRIPTION "Specifies actual value for the divide factor for the output clock"
add_display_item "outclk$i" gui_actual_divide_factor$i parameter

add_parameter gui_actual_output_clock_frequency$i STRING "0 MHz"
set_parameter_property gui_actual_output_clock_frequency$i DEFAULT_VALUE "0 MHz"
set_parameter_property gui_actual_output_clock_frequency$i DISPLAY_NAME "Actual Frequency"
set_parameter_property gui_actual_output_clock_frequency$i VISIBLE true
set_parameter_property gui_actual_output_clock_frequency$i AFFECTS_GENERATION true
set_parameter_property gui_actual_output_clock_frequency$i HDL_PARAMETER false
set_parameter_property gui_actual_output_clock_frequency$i DESCRIPTION "Specifies actual value for output clock frequency"
add_display_item "outclk$i" gui_actual_output_clock_frequency$i parameter 

add_parameter gui_ps_units$i STRING "ps"
set_parameter_property gui_ps_units$i DEFAULT_VALUE "ps"
set_parameter_property gui_ps_units$i DISPLAY_NAME "Phase Shift units"
set_parameter_property gui_ps_units$i UNITS None
set_parameter_property gui_ps_units$i ALLOWED_RANGES {"ps" "degrees"}
set_parameter_property gui_ps_units$i AFFECTS_GENERATION true
set_parameter_property gui_ps_units$i HDL_PARAMETER false
set_parameter_property gui_ps_units$i DESCRIPTION "Enter phase shift in degrees or picoseconds."
add_display_item "outclk$i" gui_ps_units$i parameter 

add_parameter gui_phase_shift$i INTEGER "0"
set_parameter_property gui_phase_shift$i DEFAULT_VALUE "0"
set_parameter_property gui_phase_shift$i DISPLAY_NAME "Phase Shift"
set_parameter_property gui_phase_shift$i UNITS "picoseconds"
set_parameter_property gui_phase_shift$i VISIBLE false
set_parameter_property gui_phase_shift$i AFFECTS_GENERATION true
set_parameter_property gui_phase_shift$i HDL_PARAMETER false
set_parameter_property gui_phase_shift$i DESCRIPTION "Specifies requested value for phase shift"
add_display_item "outclk$i" gui_phase_shift$i parameter

add_parameter gui_phase_shift_deg$i FLOAT "0"
set_parameter_property gui_phase_shift_deg$i DEFAULT_VALUE "0"
set_parameter_property gui_phase_shift_deg$i DISPLAY_NAME "Phase Shift"
set_parameter_property gui_phase_shift_deg$i DISPLAY_UNITS "degrees"
set_parameter_property gui_phase_shift_deg$i ALLOWED_RANGES {-360:360}
set_parameter_property gui_phase_shift_deg$i VISIBLE false
set_parameter_property gui_phase_shift_deg$i AFFECTS_GENERATION true
set_parameter_property gui_phase_shift_deg$i HDL_PARAMETER false
set_parameter_property gui_phase_shift_deg$i DESCRIPTION "Specifies requested value for phase shift"
add_display_item "outclk$i" gui_phase_shift_deg$i parameter
set_parameter_update_callback gui_phase_shift_deg$i round_phase_shift_to_one_decimal

add_parameter gui_actual_phase_shift$i STRING "0"
set_parameter_property gui_actual_phase_shift$i DEFAULT_VALUE "0"
set_parameter_property gui_actual_phase_shift$i DISPLAY_NAME "Actual Phase Shift"
set_parameter_property gui_actual_phase_shift$i VISIBLE false
set_parameter_property gui_actual_phase_shift$i AFFECTS_GENERATION true
set_parameter_property gui_actual_phase_shift$i HDL_PARAMETER false
set_parameter_property gui_actual_phase_shift$i DESCRIPTION "Specifies actual value for phase shift"
add_display_item "outclk$i" gui_actual_phase_shift$i parameter 

add_parameter gui_duty_cycle$i INTEGER 50
set_parameter_property gui_duty_cycle$i DEFAULT_VALUE 50
set_parameter_property gui_duty_cycle$i DISPLAY_NAME "Duty Cycle"
set_parameter_property gui_duty_cycle$i UNITS "percent"
set_parameter_property gui_duty_cycle$i ALLOWED_RANGES {1:99}
set_parameter_property gui_duty_cycle$i VISIBLE false
set_parameter_property gui_duty_cycle$i AFFECTS_GENERATION true
set_parameter_property gui_duty_cycle$i HDL_PARAMETER false
set_parameter_property gui_duty_cycle$i DESCRIPTION "Specifies requested value for duty cycle"
add_display_item "outclk$i" gui_duty_cycle$i parameter
}

for { set i 0 } {$i < 18} {incr i} {
add_parameter output_clock_frequency$i STRING "0 MHz"
set_parameter_property output_clock_frequency$i DEFAULT_VALUE "0 MHz"
set_parameter_property output_clock_frequency$i VISIBLE false
set_parameter_property output_clock_frequency$i AFFECTS_GENERATION true
set_parameter_property output_clock_frequency$i DERIVED true
set_parameter_property output_clock_frequency$i HDL_PARAMETER false
add_display_item "Output Clocks" output_clock_frequency$i parameter

add_parameter phase_shift$i STRING "0 ps"
set_parameter_property phase_shift$i DEFAULT_VALUE "0 ps"
set_parameter_property phase_shift$i UNITS "picoseconds"
set_parameter_property phase_shift$i VISIBLE false
set_parameter_property phase_shift$i AFFECTS_GENERATION true
set_parameter_property phase_shift$i DERIVED true
set_parameter_property phase_shift$i HDL_PARAMETER false
add_display_item "Output Clocks" phase_shift$i parameter

add_parameter duty_cycle$i INTEGER 50
set_parameter_property duty_cycle$i DEFAULT_VALUE 50
set_parameter_property duty_cycle$i ALLOWED_RANGES {1:99}
set_parameter_property duty_cycle$i VISIBLE false
set_parameter_property duty_cycle$i AFFECTS_GENERATION true
set_parameter_property duty_cycle$i DERIVED true
set_parameter_property duty_cycle$i HDL_PARAMETER false
add_display_item "Output Clocks" duty_cycle$i parameter
}

add_parameter gui_pll_auto_reset STRING "OFF"
set_parameter_property gui_pll_auto_reset DEFAULT_VALUE "Off"
set_parameter_property gui_pll_auto_reset DISPLAY_NAME "PLL Auto Reset"
set_parameter_property gui_pll_auto_reset UNITS None
set_parameter_property gui_pll_auto_reset ALLOWED_RANGES {"Off" "On"}
set_parameter_property gui_pll_auto_reset AFFECTS_GENERATION true
set_parameter_property gui_pll_auto_reset HDL_PARAMETER false
set_parameter_property gui_pll_auto_reset DESCRIPTION "Automatically self-resets the PLL on loss of lock."
add_display_item "Settings" gui_pll_auto_reset parameter 

add_parameter gui_pll_bandwidth_preset STRING "Auto"
set_parameter_property gui_pll_bandwidth_preset DEFAULT_VALUE "Auto"
set_parameter_property gui_pll_bandwidth_preset DISPLAY_NAME "PLL Bandwidth Preset"
set_parameter_property gui_pll_bandwidth_preset UNITS None
set_parameter_property gui_pll_bandwidth_preset ALLOWED_RANGES {"Auto" "High" "Low" "Medium"}
set_parameter_property gui_pll_bandwidth_preset AFFECTS_GENERATION true
set_parameter_property gui_pll_bandwidth_preset HDL_PARAMETER false
set_parameter_property gui_pll_bandwidth_preset DESCRIPTION "Specifies the PLL bandwidth preset setting."
add_display_item "Settings" gui_pll_bandwidth_preset parameter 

add_parameter gui_en_reconf boolean 0
set_parameter_property gui_en_reconf DEFAULT_VALUE 0
set_parameter_property gui_en_reconf DISPLAY_NAME "Enable dynamic reconfiguration of PLL"
set_parameter_property gui_en_reconf UNITS None
set_parameter_property gui_en_reconf DISPLAY_HINT ""
set_parameter_property gui_en_reconf AFFECTS_ELABORATION true
set_parameter_property gui_en_reconf AFFECTS_GENERATION true
set_parameter_property gui_en_reconf IS_HDL_PARAMETER false
set_parameter_property gui_en_reconf DESCRIPTION "Turn on this parameter to enable the dynamic reconfiguration of this PLL (in conjunction with Altera PLL Reconfig)"
add_display_item "Settings" gui_en_reconf parameter 

add_parameter gui_en_dps_ports boolean 0
set_parameter_property gui_en_dps_ports DEFAULT_VALUE 0
set_parameter_property gui_en_dps_ports DISPLAY_NAME "Enable access to dynamic phase shift ports"
set_parameter_property gui_en_dps_ports UNITS None
set_parameter_property gui_en_dps_ports DISPLAY_HINT ""
set_parameter_property gui_en_dps_ports AFFECTS_ELABORATION true
set_parameter_property gui_en_dps_ports AFFECTS_GENERATION true
set_parameter_property gui_en_dps_ports IS_HDL_PARAMETER false
set_parameter_property gui_en_dps_ports VISIBLE true
set_parameter_property gui_en_dps_ports DESCRIPTION "Turn on this parameter to enable the dynamic phase shift interface with the PLL."
add_display_item "Settings" gui_en_dps_ports parameter 

add_parameter gui_en_phout_ports boolean 0
set_parameter_property gui_en_phout_ports DEFAULT_VALUE 0
set_parameter_property gui_en_phout_ports DISPLAY_NAME "Enable access to PLL DPA output port"
set_parameter_property gui_en_phout_ports UNITS None
set_parameter_property gui_en_phout_ports DISPLAY_HINT ""
set_parameter_property gui_en_phout_ports AFFECTS_ELABORATION true
set_parameter_property gui_en_phout_ports AFFECTS_GENERATION true
set_parameter_property gui_en_phout_ports IS_HDL_PARAMETER false
set_parameter_property gui_en_phout_ports VISIBLE true 
set_parameter_property gui_en_phout_ports DESCRIPTION "Turn on this parameter to enable the PLL DPA output port (not available in CV)"
add_display_item "Settings" gui_en_phout_ports parameter 

add_parameter gui_phout_division Integer 1
set_parameter_property gui_phout_division DEFAULT_VALUE 1
set_parameter_property gui_phout_division DISPLAY_NAME "PLL DPA output division"
set_parameter_property gui_phout_division ALLOWED_RANGES {1 2 4}
set_parameter_property gui_phout_division UNITS None
set_parameter_property gui_phout_division ENABLED "false"
set_parameter_property gui_phout_division DISPLAY_HINT ""
set_parameter_property gui_phout_division AFFECTS_GENERATION true
set_parameter_property gui_phout_division HDL_PARAMETER false
set_parameter_property gui_phout_division DESCRIPTION "Specific the division setting on PLL DPA output"
add_display_item "Settings" gui_phout_division parameter 

add_parameter gui_en_lvds_ports boolean 0
set_parameter_property gui_en_lvds_ports DEFAULT_VALUE 0
set_parameter_property gui_en_lvds_ports DISPLAY_NAME "Enable access to PLL LVDS_CLK/LOADEN output port"
set_parameter_property gui_en_lvds_ports UNITS None
set_parameter_property gui_en_lvds_ports DISPLAY_HINT ""
set_parameter_property gui_en_lvds_ports AFFECTS_ELABORATION true
set_parameter_property gui_en_lvds_ports AFFECTS_GENERATION true
set_parameter_property gui_en_lvds_ports IS_HDL_PARAMETER false
set_parameter_property gui_en_lvds_ports VISIBLE true 
set_parameter_property gui_en_lvds_ports DESCRIPTION "Turn on this parameter to enable the PLL LVDS_CLK/LOADEN output port"
add_display_item "Settings" gui_en_lvds_ports parameter 

add_parameter pll_vcoph_div INTEGER 1
set_parameter_property pll_vcoph_div DEFAULT_VALUE 1
set_parameter_property pll_vcoph_div VISIBLE false
set_parameter_property pll_vcoph_div ALLOWED_RANGES {1 2 4}
set_parameter_property pll_vcoph_div ENABLED "false"
set_parameter_property pll_vcoph_div AFFECTS_GENERATION true
set_parameter_property pll_vcoph_div DERIVED true
set_parameter_property pll_vcoph_div HDL_PARAMETER false
add_display_item "Settings" pll_vcoph_div parameter 

add_parameter pll_type STRING "General"
set_parameter_property pll_type DEFAULT_VALUE "General"
set_parameter_property pll_type DISPLAY_NAME "PLL TYPE"
set_parameter_property pll_type UNITS None
set_parameter_property pll_type DISPLAY_HINT ""
set_parameter_property pll_type AFFECTS_GENERATION true
set_parameter_property pll_type IS_HDL_PARAMETER false
set_parameter_property pll_type DESCRIPTION "PLL TYPE"
set_parameter_property pll_type VISIBLE false
set_parameter_property pll_type DERIVED true
add_display_item "Settings" pll_type parameter 

add_parameter pll_subtype STRING "General"
set_parameter_property pll_subtype DEFAULT_VALUE "General"
set_parameter_property pll_subtype DISPLAY_NAME "PLL SUBTYPE"
set_parameter_property pll_subtype UNITS None
set_parameter_property pll_subtype DISPLAY_HINT ""
set_parameter_property pll_subtype AFFECTS_GENERATION true
set_parameter_property pll_subtype IS_HDL_PARAMETER false
set_parameter_property pll_subtype DESCRIPTION "PLL SUBTYPE"
set_parameter_property pll_subtype VISIBLE false
set_parameter_property pll_subtype DERIVED true
add_display_item "Settings" pll_subtype parameter 

#physical settings for the PLL. These parameters
#are supported by reconfig.
add_parameter m_cnt_hi_div INTEGER 1
set_parameter_property m_cnt_hi_div DEFAULT_VALUE 1
set_parameter_property m_cnt_hi_div ALLOWED_RANGES {1:$max_M_HI_DIV}
set_parameter_property m_cnt_hi_div UNITS None
set_parameter_property m_cnt_hi_div AFFECTS_GENERATION true
set_parameter_property m_cnt_hi_div IS_HDL_PARAMETER false
set_parameter_property m_cnt_hi_div VISIBLE false
set_parameter_property m_cnt_hi_div DERIVED true
set_parameter_property m_cnt_hi_div ENABLED false

#global array to store all physical params
set five_series_phys_params_list [list]
set ten_series_phys_params_list [list]
lappend five_series_phys_params_list [list m_cnt_hi_div "M-Counter Hi Divide" "FRACTIONAL_PLL_PLL_M_CNT_HI_DIV"]
lappend ten_series_phys_params_list [list m_cnt_hi_div "M-Counter Hi Divide" "IOPLL_PLL_M_COUNTER_HIGH" ""]

add_parameter m_cnt_lo_div INTEGER 1
set_parameter_property m_cnt_lo_div DEFAULT_VALUE 1
set_parameter_property m_cnt_lo_div ALLOWED_RANGES {1:$max_M_LO_DIV}
set_parameter_property m_cnt_lo_div UNITS None
set_parameter_property m_cnt_lo_div AFFECTS_GENERATION true
set_parameter_property m_cnt_lo_div IS_HDL_PARAMETER false
set_parameter_property m_cnt_lo_div VISIBLE false
set_parameter_property m_cnt_lo_div DERIVED true
set_parameter_property m_cnt_lo_div ENABLED false
lappend five_series_phys_params_list [list m_cnt_lo_div "M-Counter Low Divide" "FRACTIONAL_PLL_PLL_M_CNT_LO_DIV"]
lappend ten_series_phys_params_list [list m_cnt_lo_div "M-Counter Low Divide" "IOPLL_PLL_M_COUNTER_LOW" ""]

add_parameter n_cnt_hi_div INTEGER 1
set_parameter_property n_cnt_hi_div DEFAULT_VALUE 1
set_parameter_property n_cnt_hi_div ALLOWED_RANGES {1:$max_N_HI_DIV}
set_parameter_property n_cnt_hi_div UNITS None
set_parameter_property n_cnt_hi_div AFFECTS_GENERATION true
set_parameter_property n_cnt_hi_div IS_HDL_PARAMETER false
set_parameter_property n_cnt_hi_div VISIBLE false
set_parameter_property n_cnt_hi_div DERIVED true
set_parameter_property n_cnt_hi_div ENABLED false
lappend five_series_phys_params_list [list n_cnt_hi_div "N-Counter Hi Divide" "FRACTIONAL_PLL_PLL_N_CNT_HI_DIV"]
lappend ten_series_phys_params_list [list n_cnt_hi_div "N-Counter Hi Divide" "IOPLL_PLL_N_COUNTER_HIGH" ""]

add_parameter n_cnt_lo_div INTEGER 1
set_parameter_property n_cnt_lo_div DEFAULT_VALUE 1
set_parameter_property n_cnt_lo_div ALLOWED_RANGES {1:$max_N_LO_DIV}
set_parameter_property n_cnt_lo_div UNITS None
set_parameter_property n_cnt_lo_div AFFECTS_GENERATION true
set_parameter_property n_cnt_lo_div IS_HDL_PARAMETER false
set_parameter_property n_cnt_lo_div VISIBLE false
set_parameter_property n_cnt_lo_div DERIVED true
set_parameter_property n_cnt_lo_div ENABLED false
lappend five_series_phys_params_list [list n_cnt_lo_div "N-Counter Low Divide" "FRACTIONAL_PLL_PLL_N_CNT_LO_DIV"]
lappend ten_series_phys_params_list [list n_cnt_lo_div "N-Counter Low Divide" "IOPLL_PLL_N_COUNTER_LOW" ""]

add_parameter m_cnt_bypass_en STRING "true"
set_parameter_property m_cnt_bypass_en DEFAULT_VALUE "true"
set_parameter_property m_cnt_bypass_en ALLOWED_RANGES {"false" "true"}
set_parameter_property m_cnt_bypass_en UNITS None
set_parameter_property m_cnt_bypass_en AFFECTS_GENERATION true
set_parameter_property m_cnt_bypass_en IS_HDL_PARAMETER false
set_parameter_property m_cnt_bypass_en VISIBLE false
set_parameter_property m_cnt_bypass_en DERIVED true
set_parameter_property m_cnt_bypass_en ENABLED false
lappend five_series_phys_params_list [list m_cnt_bypass_en "M-Counter Bypass Enable" "FRACTIONAL_PLL_PLL_M_CNT_BYPASS_EN"]
lappend ten_series_phys_params_list [list m_cnt_bypass_en "M-Counter Bypass Enable" "IOPLL_PLL_M_COUNTER_BYPASS_EN" ""]

add_parameter n_cnt_bypass_en STRING "true" 
set_parameter_property n_cnt_bypass_en DEFAULT_VALUE "true"
set_parameter_property n_cnt_bypass_en ALLOWED_RANGES {"false" "true"}
set_parameter_property n_cnt_bypass_en UNITS None
set_parameter_property n_cnt_bypass_en AFFECTS_GENERATION true
set_parameter_property n_cnt_bypass_en IS_HDL_PARAMETER false
set_parameter_property n_cnt_bypass_en VISIBLE false
set_parameter_property n_cnt_bypass_en DERIVED true
set_parameter_property n_cnt_bypass_en ENABLED false
lappend five_series_phys_params_list [list n_cnt_bypass_en "N-Counter Bypass Enable" "FRACTIONAL_PLL_PLL_N_CNT_BYPASS_EN"]
lappend ten_series_phys_params_list [list n_cnt_bypass_en "N-Counter Bypass Enable" "IOPLL_PLL_N_COUNTER_BYPASS_EN" ""]

add_parameter m_cnt_odd_div_duty_en STRING "false"
set_parameter_property m_cnt_odd_div_duty_en DEFAULT_VALUE "false"
set_parameter_property m_cnt_odd_div_duty_en ALLOWED_RANGES {"false" "true"}
set_parameter_property m_cnt_odd_div_duty_en UNITS None
set_parameter_property m_cnt_odd_div_duty_en AFFECTS_GENERATION true
set_parameter_property m_cnt_odd_div_duty_en IS_HDL_PARAMETER false
set_parameter_property m_cnt_odd_div_duty_en VISIBLE false
set_parameter_property m_cnt_odd_div_duty_en DERIVED true
set_parameter_property m_cnt_odd_div_duty_en ENABLED false
lappend five_series_phys_params_list [list m_cnt_odd_div_duty_en "M-Counter Odd Divide Enable" "FRACTIONAL_PLL_PLL_M_CNT_ODD_DIV_DUTY_EN"]
lappend ten_series_phys_params_list [list m_cnt_odd_div_duty_en "M-Counter Odd Divide Enable" "IOPLL_PLL_M_COUNTER_EVEN_DUTY_EN" ""]

add_parameter n_cnt_odd_div_duty_en STRING "false"
set_parameter_property n_cnt_odd_div_duty_en DEFAULT_VALUE "false"
set_parameter_property n_cnt_odd_div_duty_en ALLOWED_RANGES {"false" "true"}
set_parameter_property n_cnt_odd_div_duty_en UNITS None
set_parameter_property n_cnt_odd_div_duty_en AFFECTS_GENERATION true
set_parameter_property n_cnt_odd_div_duty_en IS_HDL_PARAMETER false
set_parameter_property n_cnt_odd_div_duty_en VISIBLE false
set_parameter_property n_cnt_odd_div_duty_en DERIVED true
set_parameter_property n_cnt_odd_div_duty_en ENABLED false
lappend five_series_phys_params_list [list n_cnt_odd_div_duty_en "N-Counter Odd Divide Enable" "FRACTIONAL_PLL_PLL_N_CNT_ODD_DIV_DUTY_EN"]
lappend ten_series_phys_params_list [list n_cnt_odd_div_duty_en "N-Counter Odd Divide Enable" "IOPLL_PLL_N_COUNTER_ODD_DIV_DUTY_EN" ""]

for { set i 0 } {$i < 18} {incr i} {
add_parameter c_cnt_hi_div$i INTEGER 1
set_parameter_property c_cnt_hi_div$i DEFAULT_VALUE 1
set_parameter_property c_cnt_hi_div$i ALLOWED_RANGES {1:$max_C_HI_DIV}
set_parameter_property c_cnt_hi_div$i UNITS None
set_parameter_property c_cnt_hi_div$i AFFECTS_GENERATION true
set_parameter_property c_cnt_hi_div$i IS_HDL_PARAMETER false
set_parameter_property c_cnt_hi_div$i VISIBLE false
set_parameter_property c_cnt_hi_div$i DERIVED true
set_parameter_property c_cnt_hi_div$i ENABLED false
lappend five_series_phys_params_list [list c_cnt_hi_div$i "C-Counter-$i Hi Divide" "PLL_OUTPUT_COUNTER_DPRIO0_CNT_HI_DIV$i"]

add_parameter c_cnt_lo_div$i INTEGER 1
set_parameter_property c_cnt_lo_div$i DEFAULT_VALUE 1
set_parameter_property c_cnt_lo_div$i ALLOWED_RANGES {1:$max_C_LO_DIV}
set_parameter_property c_cnt_lo_div$i UNITS None
set_parameter_property c_cnt_lo_div$i AFFECTS_GENERATION true
set_parameter_property c_cnt_lo_div$i IS_HDL_PARAMETER false
set_parameter_property c_cnt_lo_div$i VISIBLE false
set_parameter_property c_cnt_lo_div$i DERIVED true
set_parameter_property c_cnt_lo_div$i ENABLED false
lappend five_series_phys_params_list [list c_cnt_lo_div$i "C-Counter-$i Low Divide" "PLL_OUTPUT_COUNTER_DPRIO0_CNT_LO_DIV$i"]

add_parameter c_cnt_prst$i INTEGER 1
set_parameter_property c_cnt_prst$i DEFAULT_VALUE 1
set_parameter_property c_cnt_prst$i ALLOWED_RANGES {1:256}
set_parameter_property c_cnt_prst$i UNITS None
set_parameter_property c_cnt_prst$i AFFECTS_GENERATION true
set_parameter_property c_cnt_prst$i IS_HDL_PARAMETER false
set_parameter_property c_cnt_prst$i VISIBLE false
set_parameter_property c_cnt_prst$i DERIVED true
set_parameter_property c_cnt_prst$i ENABLED false
lappend five_series_phys_params_list [list c_cnt_prst$i "C-Counter-$i Coarse Phase Shift" "PLL_OUTPUT_COUNTER_C_CNT_PRST$i"]

add_parameter c_cnt_ph_mux_prst$i INTEGER 0
set_parameter_property c_cnt_ph_mux_prst$i DEFAULT_VALUE 0
set_parameter_property c_cnt_ph_mux_prst$i ALLOWED_RANGES {0:7}
set_parameter_property c_cnt_ph_mux_prst$i UNITS None
set_parameter_property c_cnt_ph_mux_prst$i AFFECTS_GENERATION true
set_parameter_property c_cnt_ph_mux_prst$i IS_HDL_PARAMETER false
set_parameter_property c_cnt_ph_mux_prst$i VISIBLE false
set_parameter_property c_cnt_ph_mux_prst$i DERIVED true
set_parameter_property c_cnt_ph_mux_prst$i ENABLED false
lappend five_series_phys_params_list [list c_cnt_ph_mux_prst$i "C-Counter-$i VCO Phase Tap" "PLL_OUTPUT_COUNTER_C_CNT_PH_MUX_PRST$i"]

add_parameter c_cnt_in_src$i STRING "ph_mux_clk"
set_parameter_property c_cnt_in_src$i DEFAULT_VALUE "ph_mux_clk"
set_parameter_property c_cnt_in_src$i ALLOWED_RANGES {"ph_mux_clk" "cscd_clk"}
set_parameter_property c_cnt_in_src$i UNITS None
set_parameter_property c_cnt_in_src$i AFFECTS_GENERATION true
set_parameter_property c_cnt_in_src$i IS_HDL_PARAMETER false
set_parameter_property c_cnt_in_src$i VISIBLE false
set_parameter_property c_cnt_in_src$i DERIVED true
set_parameter_property c_cnt_in_src$i ENABLED false
lappend five_series_phys_params_list [list c_cnt_in_src$i "C-Counter-$i Input Source" "PLL_OUTPUT_COUNTER_C_CNT_IN_SRC$i"]

add_parameter c_cnt_bypass_en$i STRING "true"
set_parameter_property c_cnt_bypass_en$i DEFAULT_VALUE "true"
set_parameter_property c_cnt_bypass_en$i ALLOWED_RANGES {"false" "true"}
set_parameter_property c_cnt_bypass_en$i UNITS None
set_parameter_property c_cnt_bypass_en$i AFFECTS_GENERATION true
set_parameter_property c_cnt_bypass_en$i IS_HDL_PARAMETER false
set_parameter_property c_cnt_bypass_en$i VISIBLE false
set_parameter_property c_cnt_bypass_en$i DERIVED true
set_parameter_property c_cnt_bypass_en$i ENABLED false
lappend five_series_phys_params_list [list c_cnt_bypass_en$i "C-Counter-$i Bypass Enable" "PLL_OUTPUT_COUNTER_DPRIO0_CNT_BYPASS_EN$i"]

add_parameter c_cnt_odd_div_duty_en$i STRING "false"
set_parameter_property c_cnt_odd_div_duty_en$i DEFAULT_VALUE "false"
set_parameter_property c_cnt_odd_div_duty_en$i ALLOWED_RANGES {"false" "true"}
set_parameter_property c_cnt_odd_div_duty_en$i UNITS None
set_parameter_property c_cnt_odd_div_duty_en$i AFFECTS_GENERATION true
set_parameter_property c_cnt_odd_div_duty_en$i IS_HDL_PARAMETER false
set_parameter_property c_cnt_odd_div_duty_en$i VISIBLE false
set_parameter_property c_cnt_odd_div_duty_en$i DERIVED true
set_parameter_property c_cnt_odd_div_duty_en$i ENABLED false
lappend five_series_phys_params_list [list c_cnt_odd_div_duty_en$i "C-Counter-$i Odd Divide Enable" "PLL_OUTPUT_COUNTER_DPRIO0_CNT_ODD_DIV_EVEN_DUTY_EN$i"]
}

for { set i 0 } {$i < 9} {incr i} {
lappend ten_series_phys_params_list [list c_cnt_hi_div$i "C-Counter-$i Hi Divide" "IOPLL_PLL_C_COUNTER_$i" "_HIGH"]
lappend ten_series_phys_params_list [list c_cnt_lo_div$i "C-Counter-$i Low Divide" "IOPLL_PLL_C_COUNTER_$i" "_LOW"]
lappend ten_series_phys_params_list [list c_cnt_prst$i "C-Counter-$i Coarse Phase Shift" "IOPLL_PLL_C_COUNTER_$i" "_PRST"]
lappend ten_series_phys_params_list [list c_cnt_ph_mux_prst$i "C-Counter-$i VCO Phase Tap" "IOPLL_PLL_C_COUNTER_$i" "_PH_MUX_PRST"]
lappend ten_series_phys_params_list [list c_cnt_bypass_en$i "C-Counter-$i Bypass Enable" "IOPLL_PLL_C_COUNTER_$i" "_BYPASS_EN"]
lappend ten_series_phys_params_list [list c_cnt_odd_div_duty_en$i "C-Counter-$i Odd Divide Enable" "IOPLL_PLL_C_COUNTER_$i" "_EVEN_DUTY_EN"]
}

#Extra physical parameters
add_parameter pll_vco_div INTEGER 1
set_parameter_property pll_vco_div DEFAULT_VALUE 1
set_parameter_property pll_vco_div ALLOWED_RANGES {1 2}
set_parameter_property pll_vco_div UNITS None
set_parameter_property pll_vco_div AFFECTS_GENERATION true
set_parameter_property pll_vco_div IS_HDL_PARAMETER false
set_parameter_property pll_vco_div VISIBLE false
set_parameter_property pll_vco_div DERIVED true
set_parameter_property pll_vco_div ENABLED false
lappend five_series_phys_params_list [list pll_vco_div "VCO Post Divide Counter Enable" "FRACTIONAL_PLL_PLL_VCO_DIV"]

add_parameter pll_cp_current INTEGER 5
set_parameter_property pll_cp_current DEFAULT_VALUE 5
set_parameter_property pll_cp_current ALLOWED_RANGES {5 10 20 30 40}
set_parameter_property pll_cp_current UNITS None
set_parameter_property pll_cp_current AFFECTS_GENERATION true
set_parameter_property pll_cp_current IS_HDL_PARAMETER false
set_parameter_property pll_cp_current VISIBLE false
set_parameter_property pll_cp_current DERIVED true
set_parameter_property pll_cp_current ENABLED false
lappend five_series_phys_params_list [list pll_cp_current "Charge Pump current (uA)" "FRACTIONAL_PLL_PLL_CP_CURRENT"]
lappend ten_series_phys_params_list [list pll_cp_current "Charge Pump current (uA)" "IOPLL_PLL_CP_CURRENT_SETTING" ""]

add_parameter pll_bwctrl INTEGER 18000
set_parameter_property pll_bwctrl DEFAULT_VALUE 18000
set_parameter_property pll_bwctrl ALLOWED_RANGES {500 1000 2000 4000 6000 8000 10000 12000 14000 16000 18000}
set_parameter_property pll_bwctrl UNITS None
set_parameter_property pll_bwctrl AFFECTS_GENERATION true
set_parameter_property pll_bwctrl IS_HDL_PARAMETER false
set_parameter_property pll_bwctrl VISIBLE false
set_parameter_property pll_bwctrl DERIVED true
set_parameter_property pll_bwctrl ENABLED false
lappend five_series_phys_params_list [list pll_bwctrl "Loop Filter Bandwidth Resistor (Ohms) " "FRACTIONAL_PLL_PLL_BWCTRL"]
lappend ten_series_phys_params_list [list pll_bwctrl "Loop Filter Bandwidth Resistor (Ohms) " "IOPLL_PLL_BWCTRL" ""]

add_parameter pll_output_clk_frequency STRING "0 MHz"
set_parameter_property pll_output_clk_frequency DEFAULT_VALUE "0 MHz"
set_parameter_property pll_output_clk_frequency VISIBLE false
set_parameter_property pll_output_clk_frequency AFFECTS_GENERATION true
set_parameter_property pll_output_clk_frequency VISIBLE false
set_parameter_property pll_output_clk_frequency DERIVED true
set_parameter_property pll_output_clk_frequency IS_HDL_PARAMETER false
set_parameter_property pll_output_clk_frequency ENABLED false
lappend five_series_phys_params_list [list pll_output_clk_frequency "PLL Output VCO Frequency" "PLL_OUTPUT_CLOCK_FREQUENCY"]
lappend ten_series_phys_params_list [list pll_output_clk_frequency "PLL Output VCO Frequency" "PLL_OUTPUT_CLOCK_FREQUENCY" ""]
#dsm parameters

add_parameter pll_fractional_division STRING 1
set_parameter_property pll_fractional_division DEFAULT_VALUE 1
set_parameter_property pll_fractional_division UNITS None
set_parameter_property pll_fractional_division AFFECTS_GENERATION true
set_parameter_property pll_fractional_division IS_HDL_PARAMETER false
set_parameter_property pll_fractional_division VISIBLE false
set_parameter_property pll_fractional_division DERIVED true
set_parameter_property pll_fractional_division ENABLED false
lappend five_series_phys_params_list [list pll_fractional_division "K-Fractional Division Value (DSM)" "FRACTIONAL_PLL_PLL_FRACTIONAL_DIVISION"]

#operation mode parameters
add_parameter mimic_fbclk_type STRING "gclk"
set_parameter_property mimic_fbclk_type DEFAULT_VALUE "gclk"
set_parameter_property mimic_fbclk_type UNITS None
set_parameter_property mimic_fbclk_type AFFECTS_GENERATION true
set_parameter_property mimic_fbclk_type IS_HDL_PARAMETER false
set_parameter_property mimic_fbclk_type VISIBLE false
set_parameter_property mimic_fbclk_type DERIVED true
set_parameter_property mimic_fbclk_type ENABLED false
lappend five_series_phys_params_list [list mimic_fbclk_type "Feedback Clock Type" "FRACTIONAL_PLL_MIMIC_FBCLK_TYPE"]

add_parameter pll_fbclk_mux_1 STRING "glb"
set_parameter_property pll_fbclk_mux_1 DEFAULT_VALUE "glb"
set_parameter_property pll_fbclk_mux_1 UNITS None
set_parameter_property pll_fbclk_mux_1 AFFECTS_GENERATION true
set_parameter_property pll_fbclk_mux_1 IS_HDL_PARAMETER false
set_parameter_property pll_fbclk_mux_1 VISIBLE false
set_parameter_property pll_fbclk_mux_1 DERIVED true
set_parameter_property pll_fbclk_mux_1 ENABLED false
lappend five_series_phys_params_list [list pll_fbclk_mux_1 "Feedback Clock MUX 1" "FRACTIONAL_PLL_PLL_FBCLK_MUX_1"]
lappend ten_series_phys_params_list [list pll_fbclk_mux_1 "Feedback Clock MUX 1" "IOPLL_PLL_FBCLK_MUX_1" ""]

add_parameter pll_fbclk_mux_2 STRING "fb_1"
set_parameter_property pll_fbclk_mux_2 DEFAULT_VALUE "fb_1"
set_parameter_property pll_fbclk_mux_2 UNITS None
set_parameter_property pll_fbclk_mux_2 AFFECTS_GENERATION true
set_parameter_property pll_fbclk_mux_2 IS_HDL_PARAMETER false
set_parameter_property pll_fbclk_mux_2 VISIBLE false
set_parameter_property pll_fbclk_mux_2 DERIVED true
set_parameter_property pll_fbclk_mux_2 ENABLED false
lappend five_series_phys_params_list [list pll_fbclk_mux_2 "Feedback Clock MUX 2" "FRACTIONAL_PLL_PLL_FBCLK_MUX_2"]
lappend ten_series_phys_params_list [list pll_fbclk_mux_2 "Feedback Clock MUX 2" "IOPLL_PLL_FBCLK_MUX_2" ""]

add_parameter pll_m_cnt_in_src STRING "ph_mux_clk"
set_parameter_property pll_m_cnt_in_src DEFAULT_VALUE "ph_mux_clk"
set_parameter_property pll_m_cnt_in_src UNITS None
set_parameter_property pll_m_cnt_in_src AFFECTS_GENERATION true
set_parameter_property pll_m_cnt_in_src IS_HDL_PARAMETER false
set_parameter_property pll_m_cnt_in_src VISIBLE false
set_parameter_property pll_m_cnt_in_src DERIVED true
set_parameter_property pll_m_cnt_in_src ENABLED false
lappend five_series_phys_params_list [list pll_m_cnt_in_src "M Counter Source MUX" "FRACTIONAL_PLL_PLL_M_CNT_IN_SRC"]
lappend ten_series_phys_params_list [list pll_m_cnt_in_src "M Counter Source MUX" "IOPLL_PLL_M_COUNTER_IN_SRC" ""]

# showing advanced parameters in the GUI
add_parameter gui_parameter_list STRING_LIST
set_parameter_property gui_parameter_list DISPLAY_NAME "Parameter Names"
set_parameter_property gui_parameter_list DERIVED true
set_parameter_property gui_parameter_list DESCRIPTION "Shows the list of advanced PLL parameters"

add_parameter gui_parameter_values STRING_LIST
set_parameter_property gui_parameter_values DISPLAY_NAME "Parameter Values"
set_parameter_property gui_parameter_values DERIVED true
set_parameter_property gui_parameter_values DESCRIPTION "Shows the list of values for the advanced PLL parameters"

add_display_item "Advanced Parameters" "parameterTable" GROUP TABLE 
set_display_item_property "parameterTable" DISPLAY_HINT { table fixed_size rows:24 } 
add_display_item "parameterTable" gui_parameter_list parameter
add_display_item "parameterTable" gui_parameter_values parameter

## Settings for MIF Streaming under Advanced Parameters
## Enabled in elaboration_callback in pll_hw_extra.tcl
set_display_item_property "MIF Streaming" DESCRIPTION "Generate MIF file for current PLL profile"

# MIF Generate setting
add_parameter gui_mif_generate BOOLEAN false
set_parameter_property gui_mif_generate DEFAULT_VALUE false
set_parameter_property gui_mif_generate DISPLAY_NAME "Generate MIF file"
set_parameter_property gui_mif_generate UNITS None
set_parameter_property gui_mif_generate DISPLAY_HINT boolean
set_parameter_property gui_mif_generate AFFECTS_ELABORATION true
set_parameter_property gui_mif_generate AFFECTS_GENERATION true
set_parameter_property gui_mif_generate HDL_PARAMETER false
set_parameter_property gui_mif_generate DESCRIPTION "Generate MIF file for current PLL profile. Dynamic reconfiguration of PLL must be enabled."
add_display_item "MIF Streaming" gui_mif_generate parameter

# DPS Enable settings to store in MIF (Reconfig must be enabled)
add_parameter gui_enable_mif_dps boolean false 
set_parameter_property gui_enable_mif_dps DEFAULT_VALUE false
set_parameter_property gui_enable_mif_dps DISPLAY_NAME "Enable Dynamic Phase Shift for MIF streaming"
set_parameter_property gui_enable_mif_dps UNITS None
set_parameter_property gui_enable_mif_dps DISPLAY_HINT boolean
set_parameter_property gui_enable_mif_dps AFFECTS_ELABORATION true
set_parameter_property gui_enable_mif_dps AFFECTS_GENERATION true
set_parameter_property gui_enable_mif_dps HDL_PARAMETER false
set_parameter_property gui_enable_mif_dps DESCRIPTION "Store dynamic phase shift properties into MIF file for PLL Reconfiguration. Dynamic reconfiguration of PLL must be enabled."
add_display_item "MIF Streaming" gui_enable_mif_dps parameter

# Create group for Dynamic phase shift for MIF streaming
add_display_item "MIF Streaming" "Dynamic Phase Shift (MIF)" GROUP
set_display_item_property "Dynamic Phase Shift (MIF)" DESCRIPTION "Save dynamic phase shift settings into MIF file for PLL reconfig"

# DPS Counter Selection
add_parameter gui_dps_cntr STRING "C0" 
set_parameter_property gui_dps_cntr DEFAULT_VALUE "C0"
set_parameter_property gui_dps_cntr DISPLAY_NAME "DPS Counter Selection"
set_parameter_property gui_dps_cntr UNITS None
set_parameter_property gui_dps_cntr DISPLAY_HINT ""
set_parameter_property gui_dps_cntr ALLOWED_RANGES {"C0" "C1" "C2" "C3" "C4" "C5" "C6" "C7" "C8" "C9" "C10" "C11" "C12" "C13" "C14" "C15" "C16" "C17" "All C" "M"}
set_parameter_property gui_dps_cntr AFFECTS_ELABORATION true
set_parameter_property gui_dps_cntr AFFECTS_GENERATION true
set_parameter_property gui_dps_cntr HDL_PARAMETER false
set_parameter_property gui_dps_cntr DESCRIPTION "Counter to undergo dynamic phase shift"
add_display_item "Dynamic Phase Shift (MIF)" gui_dps_cntr parameter

# DPS Num Shifts setting
add_parameter gui_dps_num INTEGER 1 
set_parameter_property gui_dps_num DEFAULT_VALUE 1
set_parameter_property gui_dps_num DISPLAY_NAME "Number of Dynamic Phase Shifts"
set_parameter_property gui_dps_num UNITS None
set_parameter_property gui_dps_num DISPLAY_HINT ""
#dps num shifts ranges 1 to 2^16 - 1 = 65535 for 28nm
#					   1 to 2^3 - 1 = 7 for NF
set_parameter_property gui_dps_num ALLOWED_RANGES {1:65535}
set_parameter_property gui_dps_num AFFECTS_ELABORATION true
set_parameter_property gui_dps_num AFFECTS_GENERATION true
set_parameter_property gui_dps_num HDL_PARAMETER false
set_parameter_property gui_dps_num DESCRIPTION "Number of 45 degree phase shifts"
add_display_item "Dynamic Phase Shift (MIF)" gui_dps_num parameter

# DPS Direction setting
add_parameter gui_dps_dir STRING "Positive" 
set_parameter_property gui_dps_dir DEFAULT_VALUE "Positive"
set_parameter_property gui_dps_dir DISPLAY_NAME "Dynamic Phase Shift Direction"
set_parameter_property gui_dps_dir UNITS None
set_parameter_property gui_dps_dir DISPLAY_HINT "radio"
set_parameter_property gui_dps_dir ALLOWED_RANGES {"Positive" "Negative"}
set_parameter_property gui_dps_dir AFFECTS_ELABORATION true
set_parameter_property gui_dps_dir AFFECTS_GENERATION true
set_parameter_property gui_dps_dir HDL_PARAMETER false
set_parameter_property gui_dps_dir DESCRIPTION "DPS Direction to store into PLL MIF"
add_display_item "Dynamic Phase Shift (MIF)" gui_dps_dir parameter



add_display_item "General" "Copy" ACTION copy_actual_values
set_display_item_property "Copy" DESCRIPTION "Copy the actual PLL values to desired value fields"

##############################Clock swithover GUI and Hidden Parameters####################################
#global array to store all refclk switchover params
set refswitch_params_list [list]
#Parameter Turns on Refclk Switchover functionality
add_parameter gui_refclk_switch boolean 0
set_parameter_property gui_refclk_switch DEFAULT_VALUE 0
set_parameter_property gui_refclk_switch DISPLAY_NAME "Create a second input clk 'refclk1'"
set_parameter_property gui_refclk_switch DISPLAY_UNITS ""
set_parameter_property gui_refclk_switch UNITS None
set_parameter_property gui_refclk_switch DISPLAY_HINT ""
set_parameter_property gui_refclk_switch AFFECTS_ELABORATION true
set_parameter_property gui_refclk_switch AFFECTS_GENERATION true
set_parameter_property gui_refclk_switch VISIBLE true
set_parameter_property gui_refclk_switch IS_HDL_PARAMETER false
set_parameter_property gui_refclk_switch DESCRIPTION "Turn on this parameter to have a backup clock attached to your PLL that can switch with your original reference clock"
add_display_item "Clock Switchover" gui_refclk_switch parameter 

#adds the gui and hidden paramater for the second refclk value
lappend refswitch_params_list "gui_refclk1_frequency"
add_parameter gui_refclk1_frequency FLOAT "100.0"
set_parameter_property gui_refclk1_frequency DEFAULT_VALUE "100.0"
set_parameter_property gui_refclk1_frequency DISPLAY_NAME "Second Reference Clock Frequency"
set_parameter_property gui_refclk1_frequency UNITS "megahertz"
set_parameter_property gui_refclk1_frequency DISPLAY_HINT ""
set_parameter_property gui_refclk1_frequency ENABLED "false"
set_parameter_property gui_refclk1_frequency AFFECTS_GENERATION true
set_parameter_property gui_refclk1_frequency HDL_PARAMETER false
set_parameter_property gui_refclk1_frequency DESCRIPTION "Specifies the second reference clock frequency for Altera PLL"
add_display_item "Clock Switchover" gui_refclk1_frequency parameter 
set_parameter_update_callback gui_refclk1_frequency round_frequency_to_six_decimals

#add group for The Input Clock Switch Methods
add_display_item "Clock Switchover" "Input Clock Switchover Mode" GROUP

#add radio buttons for automatic switching/manual switching
lappend refswitch_params_list "gui_switchover_mode"
add_parameter gui_switchover_mode STRING "Automatic Switchover"
set_parameter_property gui_switchover_mode DEFAULT_VALUE "Automatic Switchover"
set_parameter_property gui_switchover_mode DISPLAY_NAME "Switchover Mode"
set_parameter_property gui_switchover_mode ALLOWED_RANGES {"Automatic Switchover" "Manual Switchover" "Automatic Switchover with Manual Override"}
set_parameter_property gui_switchover_mode UNITS None
set_parameter_property gui_switchover_mode ENABLED "false"
set_parameter_property gui_switchover_mode DISPLAY_HINT "radio"
set_parameter_property gui_switchover_mode AFFECTS_GENERATION true
set_parameter_property gui_switchover_mode HDL_PARAMETER false
set_parameter_property gui_switchover_mode DESCRIPTION "Specifies how Input frequency switchover will be handled.
Automatic Switchover will use built in circuitry to detect if one of your input clocks has stopped toggling and switch to the other. 
Manual Switchover will create an EXTSWITCH signal which can be used to manually switch the clock by asserting high for atleast 3 cycles. 
Automatic Switchover with Manual Override will perform act as Automatic Switchover until the EXTSWITCH goes high, in which case it will switch and ignore any automatic switches as long as EXTSWITCH stays high"
add_display_item "Input Clock Switchover Mode" gui_switchover_mode parameter 

#add Extra Delay timing for any switchover command
lappend refswitch_params_list "gui_switchover_delay"
add_parameter gui_switchover_delay Integer 0
set_parameter_property gui_switchover_delay DEFAULT_VALUE 0
set_parameter_property gui_switchover_delay DISPLAY_NAME "Switchover Delay"
set_parameter_property gui_switchover_delay ALLOWED_RANGES {0 1 2 3 4 5 6 7}
set_parameter_property gui_switchover_delay UNITS None
set_parameter_property gui_switchover_delay ENABLED "false"
set_parameter_property gui_switchover_delay DISPLAY_HINT ""
set_parameter_property gui_switchover_delay AFFECTS_GENERATION true
set_parameter_property gui_switchover_delay HDL_PARAMETER false
set_parameter_property gui_switchover_delay DESCRIPTION "Adds a specific amount of cycle delay to the Switchover Process"
add_display_item "Input Clock Switchover Mode" gui_switchover_delay parameter 

#add refclk select signal indicating which refclk is being used
lappend refswitch_params_list "gui_active_clk"
add_parameter gui_active_clk boolean 0
set_parameter_property gui_active_clk DEFAULT_VALUE 0
set_parameter_property gui_active_clk DISPLAY_NAME "Create an 'active_clk' signal to indicate the input clock in use"
set_parameter_property gui_active_clk DISPLAY_UNITS ""
set_parameter_property gui_active_clk UNITS None
set_parameter_property gui_active_clk DISPLAY_HINT ""
set_parameter_property gui_active_clk AFFECTS_ELABORATION true
set_parameter_property gui_active_clk AFFECTS_GENERATION true
set_parameter_property gui_active_clk VISIBLE true
set_parameter_property gui_active_clk ENABLED false
set_parameter_property gui_active_clk IS_HDL_PARAMETER false
set_parameter_property gui_active_clk DESCRIPTION "This parameter creates an output which indicates which input clock is currently in use by the PLL. Low indicates refclk, High indicates refclk1."
add_display_item "Clock Switchover" gui_active_clk parameter 

#add refclk select signal indicating which refclk is being used
lappend refswitch_params_list "gui_clk_bad"
add_parameter gui_clk_bad boolean 0
set_parameter_property gui_clk_bad DEFAULT_VALUE 0
set_parameter_property gui_clk_bad DISPLAY_NAME "Create a 'clkbad' signal for each of the input clocks"
set_parameter_property gui_clk_bad DISPLAY_UNITS ""
set_parameter_property gui_clk_bad UNITS None
set_parameter_property gui_clk_bad DISPLAY_HINT ""
set_parameter_property gui_clk_bad AFFECTS_ELABORATION true
set_parameter_property gui_clk_bad AFFECTS_GENERATION true
set_parameter_property gui_clk_bad VISIBLE true
set_parameter_property gui_clk_bad ENABLED "false"
set_parameter_property gui_clk_bad IS_HDL_PARAMETER false
set_parameter_property gui_clk_bad DESCRIPTION "This parameter creates two CLKBAD outputs, one for each input clock. Low indicates the CLK is working, High indicates the CLK isn't working"
add_display_item "Clock Switchover" gui_clk_bad parameter 

######Hidden Parameters that actually come onto Altera PLL
#useless parameter to make the user feel happy
lappend refswitch_params_list "refclk1_frequency"
add_parameter refclk1_frequency STRING "100.0 MHz"
set_parameter_property refclk1_frequency DEFAULT_VALUE "100.0 MHz"
set_parameter_property refclk1_frequency VISIBLE false
set_parameter_property refclk1_frequency AFFECTS_GENERATION true
set_parameter_property refclk1_frequency ENABLED "false"
set_parameter_property refclk1_frequency DERIVED true
set_parameter_property refclk1_frequency HDL_PARAMETER false
add_display_item "Clock Switchover" refclk1_frequency parameter 

#enable switchover circuitry
lappend refswitch_params_list "pll_clk_loss_sw_en"
add_parameter pll_clk_loss_sw_en STRING "false"
set_parameter_property pll_clk_loss_sw_en DEFAULT_VALUE "false"
set_parameter_property pll_clk_loss_sw_en VISIBLE false
set_parameter_property pll_clk_loss_sw_en ENABLED "false"
set_parameter_property pll_clk_loss_sw_en DERIVED true
set_parameter_property pll_clk_loss_sw_en AFFECTS_GENERATION true
set_parameter_property pll_clk_loss_sw_en HDL_PARAMETER false
add_display_item "Clock Switchover" pll_clk_loss_sw_en parameter 

#Manual switchover
lappend refswitch_params_list "pll_manu_clk_sw_en"
add_parameter pll_manu_clk_sw_en STRING "false"
set_parameter_property pll_manu_clk_sw_en DEFAULT_VALUE "false"
set_parameter_property pll_manu_clk_sw_en VISIBLE false
set_parameter_property pll_manu_clk_sw_en ENABLED "false"
set_parameter_property pll_manu_clk_sw_en DERIVED true
set_parameter_property pll_manu_clk_sw_en AFFECTS_GENERATION true
set_parameter_property pll_manu_clk_sw_en HDL_PARAMETER false
add_display_item "Clock Switchover" pll_manu_clk_sw_en parameter 

#Automatic switchover
lappend refswitch_params_list "pll_auto_clk_sw_en"
add_parameter pll_auto_clk_sw_en STRING "false"
set_parameter_property pll_auto_clk_sw_en DEFAULT_VALUE "false"
set_parameter_property pll_auto_clk_sw_en VISIBLE false
set_parameter_property pll_auto_clk_sw_en ENABLED "false"
set_parameter_property pll_auto_clk_sw_en DERIVED true
set_parameter_property pll_auto_clk_sw_en AFFECTS_GENERATION true
set_parameter_property pll_auto_clk_sw_en HDL_PARAMETER false
add_display_item "Clock Switchover" pll_auto_clk_sw_en parameter

#Clk that the second refclk uses
lappend refswitch_params_list "pll_clkin_1_src"
add_parameter pll_clkin_1_src STRING "clk_0"
set_parameter_property pll_clkin_1_src DEFAULT_VALUE "clk_0"
set_parameter_property pll_clkin_1_src VISIBLE false
set_parameter_property pll_clkin_1_src ENABLED "false"
set_parameter_property pll_clkin_1_src DERIVED true
set_parameter_property pll_clkin_1_src AFFECTS_GENERATION true
set_parameter_property pll_clkin_1_src HDL_PARAMETER false
add_display_item "Clock Switchover" pll_clkin_1_src parameter 

#Switchover delay parameter
lappend refswitch_params_list "pll_clk_sw_dly"
add_parameter pll_clk_sw_dly INTEGER 0
set_parameter_property pll_clk_sw_dly DEFAULT_VALUE 0
set_parameter_property pll_clk_sw_dly VISIBLE false
set_parameter_property pll_clk_sw_dly ALLOWED_RANGES {0 1 2 3 4 5 6 7}
set_parameter_property pll_clk_sw_dly ENABLED "false"
set_parameter_property pll_clk_sw_dly AFFECTS_GENERATION true
set_parameter_property pll_clk_sw_dly DERIVED true
set_parameter_property pll_clk_sw_dly HDL_PARAMETER false
add_display_item "Clock Switchover" pll_clk_sw_dly parameter 

##############################Cascading Parameters####################################

#add group for The PLL Cascading Methods
#add radio buttons for cascading mode
set pll_cascade_out_params_list [list]
set pll_cascade_mode_params_list [list]

#Parameter Turns on PLL Cascading functionality
add_display_item "Cascading" "PLL Use As Upstream PLL" GROUP
add_parameter gui_enable_cascade_out boolean 0
set_parameter_property gui_enable_cascade_out DEFAULT_VALUE 0
set_parameter_property gui_enable_cascade_out DISPLAY_NAME "Create a 'cascade_out' signal to connect with a downstream PLL"
set_parameter_property gui_enable_cascade_out DISPLAY_UNITS ""
set_parameter_property gui_enable_cascade_out UNITS None
set_parameter_property gui_enable_cascade_out DISPLAY_HINT ""
set_parameter_property gui_enable_cascade_out AFFECTS_ELABORATION true
set_parameter_property gui_enable_cascade_out AFFECTS_GENERATION true
set_parameter_property gui_enable_cascade_out VISIBLE true
set_parameter_property gui_enable_cascade_out IS_HDL_PARAMETER false
set_parameter_property gui_enable_cascade_out DESCRIPTION "This parameter creates an output port which indicates that this PLL will be used as a source and connect with a downstream PLL."
add_display_item "PLL Use As Upstream PLL" gui_enable_cascade_out parameter

add_parameter gui_cascade_outclk_index INTEGER 0
set_parameter_property gui_cascade_outclk_index DEFAULT_VALUE 0
set_parameter_property gui_cascade_outclk_index DISPLAY_NAME "Specifies which outclk to be used as cascading source"
set_parameter_property gui_cascade_outclk_index UNITS None
set_parameter_property gui_cascade_outclk_index ALLOWED_RANGES {0 1 2 3 4 5 6 7 8}
set_parameter_property gui_cascade_outclk_index VISIBLE true
set_parameter_property gui_cascade_outclk_index DISPLAY_HINT ""
set_parameter_property gui_cascade_outclk_index AFFECTS_GENERATION true
set_parameter_property gui_cascade_outclk_index HDL_PARAMETER false
set_parameter_property gui_cascade_outclk_index DESCRIPTION "Specifies the cascading source"
add_display_item "PLL Use As Upstream PLL" gui_cascade_outclk_index parameter

#Parameter Turns on PLL Cascading mode
add_display_item "Cascading" "PLL Use As Downstream PLL" GROUP
add_parameter gui_enable_cascade_in boolean 0
set_parameter_property gui_enable_cascade_in DEFAULT_VALUE 0
set_parameter_property gui_enable_cascade_in DISPLAY_NAME "Create an adjpllin or cclk signal to connect with an upstream PLL"
set_parameter_property gui_enable_cascade_in DISPLAY_UNITS ""
set_parameter_property gui_enable_cascade_in UNITS None
set_parameter_property gui_enable_cascade_in DISPLAY_HINT ""
set_parameter_property gui_enable_cascade_in AFFECTS_ELABORATION true
set_parameter_property gui_enable_cascade_in AFFECTS_GENERATION true
set_parameter_property gui_enable_cascade_in VISIBLE true
set_parameter_property gui_enable_cascade_in IS_HDL_PARAMETER false
set_parameter_property gui_enable_cascade_in DESCRIPTION "This parameter creates an input port which indicates that this PLL will be used as a destination and connect with an upstream PLL."
add_display_item "PLL Use As Downstream PLL" gui_enable_cascade_in parameter 

lappend pll_cascade_mode_params_list "pll_clkin_0_src"
add_parameter pll_clkin_0_src STRING "clk_0"
set_parameter_property pll_clkin_0_src DEFAULT_VALUE "clk_0"
set_parameter_property pll_clkin_0_src VISIBLE false
set_parameter_property pll_clkin_0_src ENABLED "false"
set_parameter_property pll_clkin_0_src DERIVED true
set_parameter_property pll_clkin_0_src AFFECTS_GENERATION true
set_parameter_property pll_clkin_0_src HDL_PARAMETER false
add_display_item "PLL Use As Downstream PLL" pll_clkin_0_src parameter 

lappend pll_cascade_mode_params_list "gui_pll_cascading_mode"
add_parameter gui_pll_cascading_mode STRING "PLL Cascading Mode"
set_parameter_property gui_pll_cascading_mode DEFAULT_VALUE "Create an adjpllin signal to connect with an upstream PLL"
set_parameter_property gui_pll_cascading_mode DISPLAY_NAME "PLL Cascading Mode"
set_parameter_property gui_pll_cascading_mode ALLOWED_RANGES {"Create an adjpllin signal to connect with an upstream PLL" "Create a cclk signal to connect with an upstream PLL"}
set_parameter_property gui_pll_cascading_mode UNITS None
set_parameter_property gui_pll_cascading_mode VISIBLE true
set_parameter_property gui_pll_cascading_mode DISPLAY_HINT "radio"
set_parameter_property gui_pll_cascading_mode AFFECTS_ELABORATION true
set_parameter_property gui_pll_cascading_mode AFFECTS_GENERATION true
set_parameter_property gui_pll_cascading_mode HDL_PARAMETER false
set_parameter_property gui_pll_cascading_mode DESCRIPTION "This parameter specifies how PLL cascading will be handled."
add_display_item "PLL Use As Downstream PLL" gui_pll_cascading_mode parameter 


# +-----------------------------------
#
# | display items
# | 
# | 
# +-----------------------------------

# +-----------------------------------
# | connection point refclk
# | 
add_interface refclk clock end

set_interface_property refclk ENABLED true

add_interface_port refclk refclk clk Input 1
# | 
# +-----------------------------------

# +-----------------------------------
# | connection point rst
# | 
add_interface reset reset end

set_interface_property reset associatedClock refclk

add_interface_port reset rst reset Input 1
# | 
# +-----------------------------------

source pll_hw_extra.tcl

# +-----------------------------------
# | 
# | Callback function when verifying whether a given parameter is
# | valid on this release.  It will handled the conversion of an old
# | parameter to a newly mapped parameter to make sure the backward
# | compatibility is still valid
# | 
# +-----------------------------------
set_module_property PARAMETER_UPGRADE_CALLBACK my_parameter_upgrade
proc my_parameter_upgrade {ip_core_type version parameters} {
	_dprint 1 "set_module_property callback function"
	set num_clk 1
	set operation_mode "direct"
	set speed_grade "2"
	set multiply_factor "1"
	set frac_multiply_factor "1"
	set divide_factor_index_list [list]
	set divide_factor_value_list [list]
	
	foreach { name value } $parameters {
		_dprint 1 "set_parameter_value on $name with $value"
		
		if { $name == "number_of_clocks" } {
			# store the value of number_of_clocks so that we can map to the new parameter
			set num_clk $value
		} elseif { $name == "operation_mode" } {
			# store the value of operation_mode so that we can map to the new parameter
			set operation_mode $value
		} elseif { $name == "device_speed_grade" } {
			# store the value of device_speed_grade so that we can map to the new parameter
			set speed_grade $value
		} elseif {[string match {gui_multiply_factor[0-9]*} $name]} {
			# store the value of gui_multiply_factor0 so that we can map to the new parameter
			if { $name == "gui_multiply_factor0" } {
				set multiply_factor $value
			}
		}  elseif {[string match {gui_frac_multiply_factor[0-9]*} $name]} {
			# store the value of gui_frac_multiply_factor0 so that we can map to the new parameter
			if { $name == "gui_frac_multiply_factor0" } {
				set frac_multiply_factor $value
			}
		}  elseif {[string match {gui_divide_factor[0-9]*} $name]} {
			# store the value of gui_divide_factor so that we can map to the new parameter
			regsub {[^0-9]+} $name "" cnt_index
			lappend divide_factor_index_list $cnt_index
			lappend divide_factor_value_list $value
		} elseif { $name == "gui_auto_validate" || $name == "AUTO_REFCLK_CLOCK_RATE" || $name == "device_family"} {
			# no op
			# The parameter has been removed
		} else {
		 	set_parameter_value $name $value
		}
	}

	# overwrite gui_number_of_clocks if number_of_clocks doesn't match the default case -- "1"
	if { $num_clk != [get_parameter_property gui_number_of_clocks DEFAULT_VALUE] } {
		set_parameter_value gui_number_of_clocks $num_clk
	}
	# overwrite gui_operation_mode if operation_mode doesn't match the default case -- "normal"
	if { $operation_mode != [get_parameter_property gui_operation_mode DEFAULT_VALUE] } {
		set_parameter_value gui_operation_mode $operation_mode
	}
	# overwrite gui_device_speed_grade if speed_grade doesn't match the default case -- "2"
	if { $speed_grade != [get_parameter_property gui_device_speed_grade DEFAULT_VALUE] } {
		set_parameter_value gui_device_speed_grade $speed_grade
	}
	# overwrite multiply_factor if multiply_factor doesn't match the default case -- "1"
	if { $multiply_factor != [get_parameter_property gui_multiply_factor DEFAULT_VALUE] } {
		set_parameter_value gui_multiply_factor $multiply_factor
	}
	# overwrite frac_multiply_factor if frac_multiply_factor doesn't match the default case -- "1"
	if { $frac_multiply_factor != [get_parameter_property gui_frac_multiply_factor DEFAULT_VALUE] } {
		set_parameter_value gui_frac_multiply_factor $frac_multiply_factor
	}
	
	# overwrite gui_divide_factor if gui_divide_factor doesn't match the default case -- "1"
    for { set i 0 } {$i < [llength $divide_factor_index_list]} {incr i 1} {
		set gui_divide_factor_c [lindex $divide_factor_index_list $i]
		set divide_factor_value [lindex $divide_factor_value_list $i]
		if { $divide_factor_value != [get_parameter_property gui_divide_factor_c$gui_divide_factor_c DEFAULT_VALUE] } {
			set_parameter_value gui_divide_factor_c$gui_divide_factor_c $divide_factor_value
		}
	}
}


