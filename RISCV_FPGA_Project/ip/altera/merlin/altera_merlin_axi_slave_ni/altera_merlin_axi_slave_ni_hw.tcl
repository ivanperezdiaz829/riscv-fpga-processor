# (C) 2001-2013 Altera Corporation. All rights reserved.
# Your use of Altera Corporation's design tools, logic functions and other 
# software and tools, and its AMPP partner logic functions, and any output 
# files any of the foregoing (including device programming or simulation 
# files), and any associated documentation or information are expressly subject 
# to the terms and conditions of the Altera Program License Subscription 
# Agreement, Altera MegaCore Function License Agreement, or other applicable 
# license agreement, including, without limitation, that your use is for the 
# sole purpose of programming logic devices manufactured by Altera and sold by 
# Altera or its authorized distributors.  Please refer to the applicable 
# agreement for further details.


# (C) 2001-2012 Altera Corporation. All rights reserved.
# Your use of Altera Corporation's design tools, logic functions and other 
# software and tools, and its AMPP partner logic functions, and any output 
# files any of the foregoing (including device programming or simulation 
# files), and any associated documentation or information are expressly subject 
# to the terms and conditions of the Altera Program License Subscription 
# Agreement, Altera MegaCore Function License Agreement, or other applicable 
# license agreement, including, without limitation, that your use is for the 
# sole purpose of programming logic devices manufactured by Altera and sold by 
# Altera or its authorized distributors.  Please refer to the applicable 
# agreement for further details.


# (C) 2001-2011 Altera Corporation. All rights reserved.
# Your use of Altera Corporation's design tools, logic functions and other 
# software and tools, and its AMPP partner logic functions, and any output 
# files any of the foregoing (including device programming or simulation 
# files), and any associated documentation or information are expressly subject 
# to the terms and conditions of the Altera Program License Subscription 
# Agreement, Altera MegaCore Function License Agreement, or other applicable 
# license agreement, including, without limitation, that your use is for the 
# sole purpose of programming logic devices manufactured by Altera and sold by 
# Altera or its authorized distributors.  Please refer to the applicable 
# agreement for further details.


# TCL File Generated by Component Editor 11.1
# Wed Jun 22 18:01:21 MYT 2011
# DO NOT MODIFY


# +-----------------------------------
# | 
# | altera_merlin_axi_slave_ni "altera_merlin_axi_slave_ni" v1.0
# | null 2011.06.22.18:01:21
# | 
# | 
# | /data/llim/p4root/acds/main/regtest/ip/merlin/altera_merlin_axi_network_ifs/altera_merlin_axi_slave_ni.sv
# | 
# |    ./altera_merlin_axi_slave_ni.sv syn, sim
# | 
# +-----------------------------------

# +-----------------------------------
# | request TCL package from ACDS 11.1
# | 
package require -exact sopc 11.0
# | 
# +-----------------------------------

# +-----------------------------------
# | module altera_merlin_axi_slave_ni
# | 
set_module_property NAME altera_merlin_axi_slave_ni
set_module_property VERSION 13.1
set_module_property INTERNAL false
set_module_property OPAQUE_ADDRESS_MAP true
set_module_property GROUP "Qsys Interconnect/AXI Interface"
set_module_property AUTHOR "Altera Corporation"
set_module_property DISPLAY_NAME "AXI Slave Network Interface"
set_module_property DESCRIPTION "Accepts command packets and issues the resulting transactions to the AXI interface"
set_module_property TOP_LEVEL_HDL_FILE altera_merlin_axi_slave_ni.sv
set_module_property TOP_LEVEL_HDL_MODULE altera_merlin_axi_slave_ni
set_module_property INSTANTIATE_IN_SYSTEM_MODULE true
set_module_property EDITABLE true
set_module_property HIDE_FROM_SOPC true
set_module_property ANALYZE_HDL FALSE
set_module_property SIMULATION_MODEL_IN_VHDL true
set_module_property STATIC_TOP_LEVEL_MODULE_NAME altera_merlin_axi_slave_ni
set_module_property FIX_110_VIP_PATH false
set_module_property ELABORATION_CALLBACK elaborate
# | 
# +-----------------------------------


# +-----------------------------------
# | files
# | 
add_file altera_merlin_axi_slave_ni.sv {SYNTHESIS SIMULATION}
add_file ../altera_merlin_slave_agent/altera_merlin_burst_uncompressor.sv {SYNTHESIS SIMULATION}
add_file ../../sopc_builder_ip/altera_avalon_sc_fifo/altera_avalon_sc_fifo.v {SYNTHESIS SIMULATION}
add_file ../../sopc_builder_ip/altera_avalon_sc_fifo/credit_producer.v  {SYNTHESIS SIMULATION}
add_file ../altera_merlin_axi_master_ni/altera_merlin_address_alignment.sv {SYNTHESIS SIMULATION}
# | 
# +-----------------------------------

# +-----------------------------------
# | documentation links
# |
add_documentation_link Documents http:/www.altera.com/literature/hb/qts/qsys_interconnect.pdf
# |
# +-----------------------------------

# +-----------------------------------
# | parameters
# | 
add_parameter PKT_QOS_H INTEGER 117
set_parameter_property PKT_QOS_H DEFAULT_VALUE 117
set_parameter_property PKT_QOS_H DISPLAY_NAME "Packet QoS index - high"
set_parameter_property PKT_QOS_H TYPE INTEGER
set_parameter_property PKT_QOS_H UNITS None
set_parameter_property PKT_QOS_H DESCRIPTION "MSB of the packet Qos field index"
set_parameter_property PKT_QOS_H AFFECTS_GENERATION false
set_parameter_property PKT_QOS_H HDL_PARAMETER true
add_parameter PKT_QOS_L INTEGER 114
set_parameter_property PKT_QOS_L DEFAULT_VALUE 114
set_parameter_property PKT_QOS_L DISPLAY_NAME "Packet QoS index - low"
set_parameter_property PKT_QOS_L TYPE INTEGER
set_parameter_property PKT_QOS_L UNITS None
set_parameter_property PKT_QOS_L DESCRIPTION "LSB of the packet Qos field index"
set_parameter_property PKT_QOS_L AFFECTS_GENERATION false
set_parameter_property PKT_QOS_L HDL_PARAMETER true
add_parameter PKT_THREAD_ID_H INTEGER 113
set_parameter_property PKT_THREAD_ID_H DISPLAY_NAME "Packet thread id index - high"
set_parameter_property PKT_THREAD_ID_H TYPE INTEGER
set_parameter_property PKT_THREAD_ID_H UNITS None
set_parameter_property PKT_THREAD_ID_H DESCRIPTION "MSB of the packet thread id field index"
set_parameter_property PKT_THREAD_ID_H AFFECTS_GENERATION false
set_parameter_property PKT_THREAD_ID_H HDL_PARAMETER true
add_parameter PKT_THREAD_ID_L INTEGER 112
set_parameter_property PKT_THREAD_ID_L DISPLAY_NAME "Packet thread id index - low"
set_parameter_property PKT_THREAD_ID_L TYPE INTEGER
set_parameter_property PKT_THREAD_ID_L UNITS None
set_parameter_property PKT_THREAD_ID_L DESCRIPTION "LSB of the packet thread id field index"
set_parameter_property PKT_THREAD_ID_L AFFECTS_GENERATION false
set_parameter_property PKT_THREAD_ID_L HDL_PARAMETER true
add_parameter PKT_RESPONSE_STATUS_H INTEGER 111
set_parameter_property PKT_RESPONSE_STATUS_H DEFAULT_VALUE 111
set_parameter_property PKT_RESPONSE_STATUS_H DISPLAY_NAME "Packet response field index - high"
set_parameter_property PKT_RESPONSE_STATUS_H TYPE INTEGER
set_parameter_property PKT_RESPONSE_STATUS_H UNITS None
set_parameter_property PKT_RESPONSE_STATUS_H DESCRIPTION "MSB of the packet response field index"
set_parameter_property PKT_RESPONSE_STATUS_H AFFECTS_GENERATION false
set_parameter_property PKT_RESPONSE_STATUS_H HDL_PARAMETER true
add_parameter PKT_RESPONSE_STATUS_L INTEGER 110
set_parameter_property PKT_RESPONSE_STATUS_L DEFAULT_VALUE 110
set_parameter_property PKT_RESPONSE_STATUS_L DISPLAY_NAME "Packet response field index - low"
set_parameter_property PKT_RESPONSE_STATUS_L TYPE INTEGER
set_parameter_property PKT_RESPONSE_STATUS_L UNITS None
set_parameter_property PKT_RESPONSE_STATUS_L DESCRIPTION "LSB of the packet response field index"
set_parameter_property PKT_RESPONSE_STATUS_L AFFECTS_GENERATION false
set_parameter_property PKT_RESPONSE_STATUS_L HDL_PARAMETER true
add_parameter PKT_BEGIN_BURST INTEGER 109
set_parameter_property PKT_BEGIN_BURST DEFAULT_VALUE 109
set_parameter_property PKT_BEGIN_BURST DISPLAY_NAME "Packet begin burst field index"
set_parameter_property PKT_BEGIN_BURST TYPE INTEGER
set_parameter_property PKT_BEGIN_BURST UNITS None
set_parameter_property PKT_BEGIN_BURST DESCRIPTION "Packet begin burst field index"
set_parameter_property PKT_BEGIN_BURST AFFECTS_GENERATION false
set_parameter_property PKT_BEGIN_BURST HDL_PARAMETER true
add_parameter PKT_CACHE_H INTEGER 108
set_parameter_property PKT_CACHE_H DEFAULT_VALUE 108
set_parameter_property PKT_CACHE_H DISPLAY_NAME "Packet AXI cache field index - high"
set_parameter_property PKT_CACHE_H TYPE INTEGER
set_parameter_property PKT_CACHE_H UNITS None
set_parameter_property PKT_CACHE_H DESCRIPTION "MSB of the Packet AXI cache field index"
set_parameter_property PKT_CACHE_H AFFECTS_GENERATION false
set_parameter_property PKT_CACHE_H HDL_PARAMETER true
add_parameter PKT_CACHE_L INTEGER 105
set_parameter_property PKT_CACHE_L DEFAULT_VALUE 105
set_parameter_property PKT_CACHE_L DISPLAY_NAME "Packet AXI cache field index - low"
set_parameter_property PKT_CACHE_L TYPE INTEGER
set_parameter_property PKT_CACHE_L UNITS None
set_parameter_property PKT_CACHE_L DESCRIPTION "LSB of the Packet AXI cache field index"
set_parameter_property PKT_CACHE_L AFFECTS_GENERATION false
set_parameter_property PKT_CACHE_L HDL_PARAMETER true
add_parameter PKT_DATA_SIDEBAND_H INTEGER 104
set_parameter_property PKT_DATA_SIDEBAND_H DEFAULT_VALUE 104
set_parameter_property PKT_DATA_SIDEBAND_H DISPLAY_NAME "Packet AXI data sideband field index - high"
set_parameter_property PKT_DATA_SIDEBAND_H TYPE INTEGER
set_parameter_property PKT_DATA_SIDEBAND_H UNITS None
set_parameter_property PKT_DATA_SIDEBAND_H DESCRIPTION "MSB of the Packet AXI data sideband field index"
set_parameter_property PKT_DATA_SIDEBAND_H AFFECTS_GENERATION false
set_parameter_property PKT_DATA_SIDEBAND_H HDL_PARAMETER true
add_parameter PKT_DATA_SIDEBAND_L INTEGER 97
set_parameter_property PKT_DATA_SIDEBAND_L DEFAULT_VALUE 97
set_parameter_property PKT_DATA_SIDEBAND_L DISPLAY_NAME "Packet AXI data sideband field index - low"
set_parameter_property PKT_DATA_SIDEBAND_L TYPE INTEGER
set_parameter_property PKT_DATA_SIDEBAND_L UNITS None
set_parameter_property PKT_DATA_SIDEBAND_L DESCRIPTION "LSB of the Packet AXI data sideband field index"
set_parameter_property PKT_DATA_SIDEBAND_L AFFECTS_GENERATION false
set_parameter_property PKT_DATA_SIDEBAND_L HDL_PARAMETER true
add_parameter PKT_ADDR_SIDEBAND_H INTEGER 96
set_parameter_property PKT_ADDR_SIDEBAND_H DEFAULT_VALUE 96
set_parameter_property PKT_ADDR_SIDEBAND_H DISPLAY_NAME "Packet AXI address sideband field index - high"
set_parameter_property PKT_ADDR_SIDEBAND_H TYPE INTEGER
set_parameter_property PKT_ADDR_SIDEBAND_H UNITS None
set_parameter_property PKT_ADDR_SIDEBAND_H DESCRIPTION "MSB of the Packet AXI address sideband field index"
set_parameter_property PKT_ADDR_SIDEBAND_H AFFECTS_GENERATION false
set_parameter_property PKT_ADDR_SIDEBAND_H HDL_PARAMETER true
add_parameter PKT_ADDR_SIDEBAND_L INTEGER 92
set_parameter_property PKT_ADDR_SIDEBAND_L DEFAULT_VALUE 92
set_parameter_property PKT_ADDR_SIDEBAND_L DISPLAY_NAME "Packet AXI address sideband field index - low"
set_parameter_property PKT_ADDR_SIDEBAND_L TYPE INTEGER
set_parameter_property PKT_ADDR_SIDEBAND_L UNITS None
set_parameter_property PKT_ADDR_SIDEBAND_L DESCRIPTION "LSB of the Packet AXI address sideband field index"
set_parameter_property PKT_ADDR_SIDEBAND_L AFFECTS_GENERATION false
set_parameter_property PKT_ADDR_SIDEBAND_L HDL_PARAMETER true
add_parameter PKT_BURST_TYPE_H INTEGER 91
set_parameter_property PKT_BURST_TYPE_H DEFAULT_VALUE 91
set_parameter_property PKT_BURST_TYPE_H DISPLAY_NAME "Packet AXI burst type field index - high"
set_parameter_property PKT_BURST_TYPE_H TYPE INTEGER
set_parameter_property PKT_BURST_TYPE_H UNITS None
set_parameter_property PKT_BURST_TYPE_H DESCRIPTION "MSB of the Packet AXI burst type field index"
set_parameter_property PKT_BURST_TYPE_H AFFECTS_GENERATION false
set_parameter_property PKT_BURST_TYPE_H HDL_PARAMETER true
add_parameter PKT_BURST_TYPE_L INTEGER 90
set_parameter_property PKT_BURST_TYPE_L DEFAULT_VALUE 90
set_parameter_property PKT_BURST_TYPE_L DISPLAY_NAME "Packet AXI burst type field index - low"
set_parameter_property PKT_BURST_TYPE_L TYPE INTEGER
set_parameter_property PKT_BURST_TYPE_L UNITS None
set_parameter_property PKT_BURST_TYPE_L DESCRIPTION "LSB of the Packet AXI burst type field index"
set_parameter_property PKT_BURST_TYPE_L AFFECTS_GENERATION false
set_parameter_property PKT_BURST_TYPE_L HDL_PARAMETER true
add_parameter PKT_PROTECTION_H INTEGER 89
set_parameter_property PKT_PROTECTION_H DEFAULT_VALUE 89
set_parameter_property PKT_PROTECTION_H DISPLAY_NAME "Packet AXI protection field index - high"
set_parameter_property PKT_PROTECTION_H TYPE INTEGER
set_parameter_property PKT_PROTECTION_H UNITS None
set_parameter_property PKT_PROTECTION_H DESCRIPTION "MSB of the Packet AXI protection field index"
set_parameter_property PKT_PROTECTION_H AFFECTS_GENERATION false
set_parameter_property PKT_PROTECTION_H HDL_PARAMETER true
add_parameter PKT_PROTECTION_L INTEGER 87
set_parameter_property PKT_PROTECTION_L DEFAULT_VALUE 87
set_parameter_property PKT_PROTECTION_L DISPLAY_NAME "Packet AXI protection field index - low"
set_parameter_property PKT_PROTECTION_L TYPE INTEGER
set_parameter_property PKT_PROTECTION_L UNITS None
set_parameter_property PKT_PROTECTION_L DESCRIPTION "LSB of the Packet AXI protection field index"
set_parameter_property PKT_PROTECTION_L AFFECTS_GENERATION false
set_parameter_property PKT_PROTECTION_L HDL_PARAMETER true
add_parameter PKT_BURST_SIZE_H INTEGER 86
set_parameter_property PKT_BURST_SIZE_H DEFAULT_VALUE 86
set_parameter_property PKT_BURST_SIZE_H DISPLAY_NAME "Packet AXI burst size field index - high"
set_parameter_property PKT_BURST_SIZE_H TYPE INTEGER
set_parameter_property PKT_BURST_SIZE_H UNITS None
set_parameter_property PKT_BURST_SIZE_H DESCRIPTION "MSB of the Packet AXI burst size field index"
set_parameter_property PKT_BURST_SIZE_H AFFECTS_GENERATION false
set_parameter_property PKT_BURST_SIZE_H HDL_PARAMETER true
add_parameter PKT_BURST_SIZE_L INTEGER 84
set_parameter_property PKT_BURST_SIZE_L DEFAULT_VALUE 84
set_parameter_property PKT_BURST_SIZE_L DISPLAY_NAME "Packet AXI burst size field index - low"
set_parameter_property PKT_BURST_SIZE_L TYPE INTEGER
set_parameter_property PKT_BURST_SIZE_L UNITS None
set_parameter_property PKT_BURST_SIZE_L DESCRIPTION "LSB of the Packet AXI burst size field index"
set_parameter_property PKT_BURST_SIZE_L AFFECTS_GENERATION false
set_parameter_property PKT_BURST_SIZE_L HDL_PARAMETER true
add_parameter PKT_BURSTWRAP_H INTEGER 83
set_parameter_property PKT_BURSTWRAP_H DEFAULT_VALUE 83
set_parameter_property PKT_BURSTWRAP_H DISPLAY_NAME "Packet AXI burstwrap field index - high"
set_parameter_property PKT_BURSTWRAP_H TYPE INTEGER
set_parameter_property PKT_BURSTWRAP_H UNITS None
set_parameter_property PKT_BURSTWRAP_H DESCRIPTION "MSB of the Packet AXI burstwrap field index"
set_parameter_property PKT_BURSTWRAP_H AFFECTS_GENERATION false
set_parameter_property PKT_BURSTWRAP_H HDL_PARAMETER true
add_parameter PKT_BURSTWRAP_L INTEGER 81
set_parameter_property PKT_BURSTWRAP_L DEFAULT_VALUE 81
set_parameter_property PKT_BURSTWRAP_L DISPLAY_NAME "Packet AXI burstwrap field index - low"
set_parameter_property PKT_BURSTWRAP_L TYPE INTEGER
set_parameter_property PKT_BURSTWRAP_L UNITS None
set_parameter_property PKT_BURSTWRAP_L DESCRIPTION "LSB of the Packet AXI burstwrap field index"
set_parameter_property PKT_BURSTWRAP_L AFFECTS_GENERATION false
set_parameter_property PKT_BURSTWRAP_L HDL_PARAMETER true
add_parameter PKT_BYTE_CNT_H INTEGER 80
set_parameter_property PKT_BYTE_CNT_H DEFAULT_VALUE 80
set_parameter_property PKT_BYTE_CNT_H DISPLAY_NAME "Packet byte count field index - high"
set_parameter_property PKT_BYTE_CNT_H TYPE INTEGER
set_parameter_property PKT_BYTE_CNT_H UNITS None
set_parameter_property PKT_BYTE_CNT_H DESCRIPTION "MSB of the Packet byte count field index"
set_parameter_property PKT_BYTE_CNT_H AFFECTS_GENERATION false
set_parameter_property PKT_BYTE_CNT_H HDL_PARAMETER true
add_parameter PKT_BYTE_CNT_L INTEGER 78
set_parameter_property PKT_BYTE_CNT_L DEFAULT_VALUE 78
set_parameter_property PKT_BYTE_CNT_L DISPLAY_NAME "Packet byte count field index - low"
set_parameter_property PKT_BYTE_CNT_L TYPE INTEGER
set_parameter_property PKT_BYTE_CNT_L UNITS None
set_parameter_property PKT_BYTE_CNT_L DESCRIPTION "LSB of the Packet byte count field index"
set_parameter_property PKT_BYTE_CNT_L AFFECTS_GENERATION false
set_parameter_property PKT_BYTE_CNT_L HDL_PARAMETER true
add_parameter PKT_ADDR_H INTEGER 77
set_parameter_property PKT_ADDR_H DEFAULT_VALUE 77
set_parameter_property PKT_ADDR_H DISPLAY_NAME "Packet AXI address field index - high"
set_parameter_property PKT_ADDR_H TYPE INTEGER
set_parameter_property PKT_ADDR_H UNITS None
set_parameter_property PKT_ADDR_H DESCRIPTION "MSB of the Packet AXI address field index"
set_parameter_property PKT_ADDR_H AFFECTS_GENERATION false
set_parameter_property PKT_ADDR_H HDL_PARAMETER true
add_parameter PKT_ADDR_L INTEGER 46
set_parameter_property PKT_ADDR_L DEFAULT_VALUE 46
set_parameter_property PKT_ADDR_L DISPLAY_NAME "Packet AXI address field index - low"
set_parameter_property PKT_ADDR_L TYPE INTEGER
set_parameter_property PKT_ADDR_L UNITS None
set_parameter_property PKT_ADDR_L DESCRIPTION "LSB of the Packet AXI address field index"
set_parameter_property PKT_ADDR_L AFFECTS_GENERATION false
set_parameter_property PKT_ADDR_L HDL_PARAMETER true
add_parameter PKT_TRANS_EXCLUSIVE INTEGER 45
set_parameter_property PKT_TRANS_EXCLUSIVE DEFAULT_VALUE 45
set_parameter_property PKT_TRANS_EXCLUSIVE DISPLAY_NAME "Packet exclusive transaction field index"
set_parameter_property PKT_TRANS_EXCLUSIVE TYPE INTEGER
set_parameter_property PKT_TRANS_EXCLUSIVE UNITS None
set_parameter_property PKT_TRANS_EXCLUSIVE DESCRIPTION "Packet exclusive transaction field index"
set_parameter_property PKT_TRANS_EXCLUSIVE AFFECTS_GENERATION false
set_parameter_property PKT_TRANS_EXCLUSIVE HDL_PARAMETER true
add_parameter PKT_TRANS_LOCK INTEGER 44
set_parameter_property PKT_TRANS_LOCK DEFAULT_VALUE 44
set_parameter_property PKT_TRANS_LOCK DISPLAY_NAME "Packet lock transaction field index"
set_parameter_property PKT_TRANS_LOCK TYPE INTEGER
set_parameter_property PKT_TRANS_LOCK UNITS None
set_parameter_property PKT_TRANS_LOCK DESCRIPTION "Packet lock transaction field index"
set_parameter_property PKT_TRANS_LOCK AFFECTS_GENERATION false
set_parameter_property PKT_TRANS_LOCK HDL_PARAMETER true
add_parameter PKT_TRANS_COMPRESSED_READ INTEGER 43
set_parameter_property PKT_TRANS_COMPRESSED_READ DEFAULT_VALUE 43
set_parameter_property PKT_TRANS_COMPRESSED_READ DISPLAY_NAME "Packet compressed read transaction field index"
set_parameter_property PKT_TRANS_COMPRESSED_READ TYPE INTEGER
set_parameter_property PKT_TRANS_COMPRESSED_READ UNITS None
set_parameter_property PKT_TRANS_COMPRESSED_READ DESCRIPTION "Packet compressed read transaction field index"
set_parameter_property PKT_TRANS_COMPRESSED_READ AFFECTS_GENERATION false
set_parameter_property PKT_TRANS_COMPRESSED_READ HDL_PARAMETER true
add_parameter PKT_TRANS_POSTED INTEGER 42
set_parameter_property PKT_TRANS_POSTED DEFAULT_VALUE 42
set_parameter_property PKT_TRANS_POSTED DISPLAY_NAME "Packet posted transaction field index"
set_parameter_property PKT_TRANS_POSTED TYPE INTEGER
set_parameter_property PKT_TRANS_POSTED UNITS None
set_parameter_property PKT_TRANS_POSTED DESCRIPTION "Packet posted transaction field index"
set_parameter_property PKT_TRANS_POSTED AFFECTS_GENERATION false
set_parameter_property PKT_TRANS_POSTED HDL_PARAMETER true
add_parameter PKT_TRANS_WRITE INTEGER 41
set_parameter_property PKT_TRANS_WRITE DEFAULT_VALUE 41
set_parameter_property PKT_TRANS_WRITE DISPLAY_NAME "Packet write transaction field index"
set_parameter_property PKT_TRANS_WRITE TYPE INTEGER
set_parameter_property PKT_TRANS_WRITE UNITS None
set_parameter_property PKT_TRANS_WRITE DESCRIPTION "Packet write transaction field index"
set_parameter_property PKT_TRANS_WRITE AFFECTS_GENERATION false
set_parameter_property PKT_TRANS_WRITE HDL_PARAMETER true
add_parameter PKT_TRANS_READ INTEGER 40
set_parameter_property PKT_TRANS_READ DEFAULT_VALUE 40
set_parameter_property PKT_TRANS_READ DISPLAY_NAME "Packet read transaction field index"
set_parameter_property PKT_TRANS_READ TYPE INTEGER
set_parameter_property PKT_TRANS_READ UNITS None
set_parameter_property PKT_TRANS_READ DESCRIPTION "Packet read transaction field index"
set_parameter_property PKT_TRANS_READ AFFECTS_GENERATION false
set_parameter_property PKT_TRANS_READ HDL_PARAMETER true
add_parameter PKT_DATA_H INTEGER 39
set_parameter_property PKT_DATA_H DEFAULT_VALUE 39
set_parameter_property PKT_DATA_H DISPLAY_NAME "Packet AXI data field index - high"
set_parameter_property PKT_DATA_H TYPE INTEGER
set_parameter_property PKT_DATA_H UNITS None
set_parameter_property PKT_DATA_H DESCRIPTION "Packet AXI data field index - high"
set_parameter_property PKT_DATA_H AFFECTS_GENERATION false
set_parameter_property PKT_DATA_H HDL_PARAMETER true
add_parameter PKT_DATA_L INTEGER 8
set_parameter_property PKT_DATA_L DEFAULT_VALUE 8
set_parameter_property PKT_DATA_L DISPLAY_NAME "Packet AXI data field index - low"
set_parameter_property PKT_DATA_L TYPE INTEGER
set_parameter_property PKT_DATA_L UNITS None
set_parameter_property PKT_DATA_L DESCRIPTION "Packet AXI data field index - low"
set_parameter_property PKT_DATA_L AFFECTS_GENERATION false
set_parameter_property PKT_DATA_L HDL_PARAMETER true
add_parameter PKT_BYTEEN_H INTEGER 7
set_parameter_property PKT_BYTEEN_H DEFAULT_VALUE 7
set_parameter_property PKT_BYTEEN_H DISPLAY_NAME "Packet byteenabke field index - high"
set_parameter_property PKT_BYTEEN_H TYPE INTEGER
set_parameter_property PKT_BYTEEN_H UNITS None
set_parameter_property PKT_BYTEEN_H DESCRIPTION "MSB of the Packet byteenabke field index"
set_parameter_property PKT_BYTEEN_H AFFECTS_GENERATION false
set_parameter_property PKT_BYTEEN_H HDL_PARAMETER true
add_parameter PKT_BYTEEN_L INTEGER 4
set_parameter_property PKT_BYTEEN_L DEFAULT_VALUE 4
set_parameter_property PKT_BYTEEN_L DISPLAY_NAME "Packet byteenabke field index - low"
set_parameter_property PKT_BYTEEN_L TYPE INTEGER
set_parameter_property PKT_BYTEEN_L UNITS None
set_parameter_property PKT_BYTEEN_L DESCRIPTION "LSB of the Packet byteenabke field index"
set_parameter_property PKT_BYTEEN_L AFFECTS_GENERATION false
set_parameter_property PKT_BYTEEN_L HDL_PARAMETER true
add_parameter PKT_SRC_ID_H INTEGER 3
set_parameter_property PKT_SRC_ID_H DEFAULT_VALUE 3
set_parameter_property PKT_SRC_ID_H DISPLAY_NAME "Packet source id field index - high"
set_parameter_property PKT_SRC_ID_H TYPE INTEGER
set_parameter_property PKT_SRC_ID_H UNITS None
set_parameter_property PKT_SRC_ID_H DESCRIPTION "MSB of the Packet source id field index"
set_parameter_property PKT_SRC_ID_H AFFECTS_GENERATION false
set_parameter_property PKT_SRC_ID_H HDL_PARAMETER true
add_parameter PKT_SRC_ID_L INTEGER 2
set_parameter_property PKT_SRC_ID_L DEFAULT_VALUE 2
set_parameter_property PKT_SRC_ID_L DISPLAY_NAME "Packet source id field index - low"
set_parameter_property PKT_SRC_ID_L TYPE INTEGER
set_parameter_property PKT_SRC_ID_L UNITS None
set_parameter_property PKT_SRC_ID_L DESCRIPTION "LSB of the Packet source id field index"
set_parameter_property PKT_SRC_ID_L AFFECTS_GENERATION false
set_parameter_property PKT_SRC_ID_L HDL_PARAMETER true
add_parameter PKT_DEST_ID_H INTEGER 1
set_parameter_property PKT_DEST_ID_H DEFAULT_VALUE 1
set_parameter_property PKT_DEST_ID_H DISPLAY_NAME "Packet destination id field index - high"
set_parameter_property PKT_DEST_ID_H TYPE INTEGER
set_parameter_property PKT_DEST_ID_H UNITS None
set_parameter_property PKT_DEST_ID_H DESCRIPTION "MSB of the Packet destination id field index"
set_parameter_property PKT_DEST_ID_H AFFECTS_GENERATION false
set_parameter_property PKT_DEST_ID_H HDL_PARAMETER true
add_parameter PKT_DEST_ID_L INTEGER 0
set_parameter_property PKT_DEST_ID_L DEFAULT_VALUE 0
set_parameter_property PKT_DEST_ID_L DISPLAY_NAME "Packet destination id field index - low"
set_parameter_property PKT_DEST_ID_L TYPE INTEGER
set_parameter_property PKT_DEST_ID_L UNITS None
set_parameter_property PKT_DEST_ID_L DESCRIPTION "LSB of the Packet destination id field index"
set_parameter_property PKT_DEST_ID_L AFFECTS_GENERATION false
set_parameter_property PKT_DEST_ID_L HDL_PARAMETER true

add_parameter PKT_ORI_BURST_SIZE_L INTEGER 118
set_parameter_property PKT_ORI_BURST_SIZE_L DISPLAY_NAME "Packet original burst size index - low"
set_parameter_property PKT_ORI_BURST_SIZE_L TYPE INTEGER
set_parameter_property PKT_ORI_BURST_SIZE_L UNITS None
set_parameter_property PKT_ORI_BURST_SIZE_L DESCRIPTION "LSB of the packet original burst size field index"
set_parameter_property PKT_ORI_BURST_SIZE_L AFFECTS_ELABORATION true
set_parameter_property PKT_ORI_BURST_SIZE_L HDL_PARAMETER true
add_parameter PKT_ORI_BURST_SIZE_H INTEGER 120
set_parameter_property PKT_ORI_BURST_SIZE_H DISPLAY_NAME "Packet original burst size index - high"
set_parameter_property PKT_ORI_BURST_SIZE_H TYPE INTEGER
set_parameter_property PKT_ORI_BURST_SIZE_H UNITS None
set_parameter_property PKT_ORI_BURST_SIZE_H DESCRIPTION "MSB of the packet original burst size field index"
set_parameter_property PKT_ORI_BURST_SIZE_H AFFECTS_ELABORATION true
set_parameter_property PKT_ORI_BURST_SIZE_H HDL_PARAMETER true

add_parameter ADDR_USER_WIDTH INTEGER 5
set_parameter_property ADDR_USER_WIDTH DEFAULT_VALUE 5
set_parameter_property ADDR_USER_WIDTH DISPLAY_NAME "AXI slave user sideband address width"
set_parameter_property ADDR_USER_WIDTH TYPE INTEGER
set_parameter_property ADDR_USER_WIDTH UNITS None
set_parameter_property ADDR_USER_WIDTH DESCRIPTION "AXI user sideband address width"
set_parameter_property ADDR_USER_WIDTH AFFECTS_ELABORATION true
set_parameter_property ADDR_USER_WIDTH HDL_PARAMETER true
set_parameter_property ADDR_USER_WIDTH ALLOWED_RANGES 1:64
add_parameter DATA_USER_WIDTH INTEGER 8
set_parameter_property DATA_USER_WIDTH DEFAULT_VALUE 8
set_parameter_property DATA_USER_WIDTH DISPLAY_NAME "AXI slave user sideband data width"
set_parameter_property DATA_USER_WIDTH TYPE INTEGER
set_parameter_property DATA_USER_WIDTH UNITS None
set_parameter_property DATA_USER_WIDTH DESCRIPTION "AXI user sideband data width"
set_parameter_property DATA_USER_WIDTH AFFECTS_ELABORATION true
set_parameter_property DATA_USER_WIDTH HDL_PARAMETER true
set_parameter_property DATA_USER_WIDTH ALLOWED_RANGES 1:64
add_parameter ST_DATA_W INTEGER 121
set_parameter_property ST_DATA_W DISPLAY_NAME "Streaming data width"
set_parameter_property ST_DATA_W TYPE INTEGER
set_parameter_property ST_DATA_W UNITS None
set_parameter_property ST_DATA_W DESCRIPTION "Streaming data width"
set_parameter_property ST_DATA_W AFFECTS_GENERATION false
set_parameter_property ST_DATA_W HDL_PARAMETER true
add_parameter ADDR_WIDTH INTEGER 32
set_parameter_property ADDR_WIDTH DEFAULT_VALUE 32
set_parameter_property ADDR_WIDTH DISPLAY_NAME "AXI master address width"
set_parameter_property ADDR_WIDTH TYPE INTEGER
set_parameter_property ADDR_WIDTH UNITS None
set_parameter_property ADDR_WIDTH DESCRIPTION "AXI address width"
set_parameter_property ADDR_WIDTH AFFECTS_GENERATION false
set_parameter_property ADDR_WIDTH HDL_PARAMETER true
add_parameter RDATA_WIDTH INTEGER 32
set_parameter_property RDATA_WIDTH DEFAULT_VALUE 32
set_parameter_property RDATA_WIDTH DISPLAY_NAME "AXI master read data width"
set_parameter_property RDATA_WIDTH TYPE INTEGER
set_parameter_property RDATA_WIDTH UNITS None
set_parameter_property RDATA_WIDTH DESCRIPTION "AXI read data width"
set_parameter_property RDATA_WIDTH AFFECTS_GENERATION false
set_parameter_property RDATA_WIDTH HDL_PARAMETER true
add_parameter WDATA_WIDTH INTEGER 32
set_parameter_property WDATA_WIDTH DEFAULT_VALUE 32
set_parameter_property WDATA_WIDTH DISPLAY_NAME "AXI master write data width"
set_parameter_property WDATA_WIDTH TYPE INTEGER
set_parameter_property WDATA_WIDTH UNITS None
set_parameter_property WDATA_WIDTH DESCRIPTION "AXI write data width"
set_parameter_property WDATA_WIDTH AFFECTS_GENERATION false
set_parameter_property WDATA_WIDTH HDL_PARAMETER true
add_parameter ST_CHANNEL_W INTEGER 1
set_parameter_property ST_CHANNEL_W DEFAULT_VALUE 1
set_parameter_property ST_CHANNEL_W DISPLAY_NAME "Streaming channel width"
set_parameter_property ST_CHANNEL_W TYPE INTEGER
set_parameter_property ST_CHANNEL_W UNITS None
set_parameter_property ST_CHANNEL_W DESCRIPTION "Streaming channel width"
set_parameter_property ST_CHANNEL_W AFFECTS_GENERATION false
set_parameter_property ST_CHANNEL_W HDL_PARAMETER true
add_parameter AXI_SLAVE_ID_W INTEGER 4
set_parameter_property AXI_SLAVE_ID_W DEFAULT_VALUE 4
set_parameter_property AXI_SLAVE_ID_W DISPLAY_NAME "AXI slave ID width"
set_parameter_property AXI_SLAVE_ID_W TYPE INTEGER
set_parameter_property AXI_SLAVE_ID_W UNITS None
set_parameter_property AXI_SLAVE_ID_W DESCRIPTION "Combined ID width of the interconnect ID width and AXI Master ID width (transaction ID)"
set_parameter_property AXI_SLAVE_ID_W AFFECTS_GENERATION false
set_parameter_property AXI_SLAVE_ID_W HDL_PARAMETER true

add_parameter PASS_ID_TO_SLAVE INTEGER 0
set_parameter_property PASS_ID_TO_SLAVE DISPLAY_NAME "Pass AXI Master ID to Slave"
set_parameter_property PASS_ID_TO_SLAVE TYPE INTEGER
set_parameter_property PASS_ID_TO_SLAVE UNITS None
set_parameter_property PASS_ID_TO_SLAVE DESCRIPTION "When enabled, the transaction ID is propagated to slave. When disabled, an ID of '0 is propagated instead."
set_parameter_property PASS_ID_TO_SLAVE AFFECTS_GENERATION false
set_parameter_property PASS_ID_TO_SLAVE HDL_PARAMETER true
set_parameter_property PASS_ID_TO_SLAVE ALLOWED_RANGES 0:1

add_parameter AXI_VERSION STRING "AXI3"
set_parameter_property AXI_VERSION DISPLAY_NAME "AXI interface version"
set_parameter_property AXI_VERSION TYPE STRING
set_parameter_property AXI_VERSION UNITS None
set_parameter_property AXI_VERSION DESCRIPTION "The interface version of the AXI Slave"
set_parameter_property AXI_VERSION AFFECTS_GENERATION false
set_parameter_property AXI_VERSION HDL_PARAMETER true
set_parameter_property AXI_VERSION ALLOWED_RANGES "AXI3,AXI4,AXI4Lite"

add_parameter WRITE_ACCEPTANCE_CAPABILITY INTEGER 16
set_parameter_property WRITE_ACCEPTANCE_CAPABILITY DISPLAY_NAME "Slave write acceptance capability"
set_parameter_property WRITE_ACCEPTANCE_CAPABILITY TYPE INTEGER
set_parameter_property WRITE_ACCEPTANCE_CAPABILITY UNITS None
set_parameter_property WRITE_ACCEPTANCE_CAPABILITY DESCRIPTION "The number of write transaction a slave can accept"
set_parameter_property WRITE_ACCEPTANCE_CAPABILITY AFFECTS_GENERATION false
set_parameter_property WRITE_ACCEPTANCE_CAPABILITY HDL_PARAMETER true

add_parameter READ_ACCEPTANCE_CAPABILITY INTEGER 16
set_parameter_property READ_ACCEPTANCE_CAPABILITY DISPLAY_NAME "Slave read acceptance capability"
set_parameter_property READ_ACCEPTANCE_CAPABILITY TYPE INTEGER
set_parameter_property READ_ACCEPTANCE_CAPABILITY UNITS None
set_parameter_property READ_ACCEPTANCE_CAPABILITY DESCRIPTION "The number of read transaction a slave can accept"
set_parameter_property READ_ACCEPTANCE_CAPABILITY AFFECTS_GENERATION false
set_parameter_property READ_ACCEPTANCE_CAPABILITY HDL_PARAMETER true 

add_parameter ID INTEGER 0
set_parameter_property ID DISPLAY_NAME "Slave ID"
set_parameter_property ID UNITS None
set_parameter_property ID DESCRIPTION "Network-domain-unique slave ID"
set_parameter_property ID HDL_PARAMETER false

add_parameter MERLIN_PACKET_FORMAT STRING ""
set_parameter_property MERLIN_PACKET_FORMAT DISPLAY_NAME "Merlin packet format"
set_parameter_property MERLIN_PACKET_FORMAT UNITS None
set_parameter_property MERLIN_PACKET_FORMAT DESCRIPTION "Merlin packet format"
set_parameter_property MERLIN_PACKET_FORMAT AFFECTS_ELABORATION true
set_parameter_property MERLIN_PACKET_FORMAT HDL_PARAMETER false

add_parameter USE_ADDR_USER INTEGER 1
set_parameter_property USE_ADDR_USER DISPLAY_NAME "Enable AXI address sideband signals"
set_parameter_property USE_ADDR_USER TYPE INTEGER
set_parameter_property USE_ADDR_USER UNITS None
set_parameter_property USE_ADDR_USER DESCRIPTION "Enables AWUSER and ARUSER"
set_parameter_property USE_ADDR_USER AFFECTS_ELABORATION true
set_parameter_property USE_ADDR_USER ALLOWED_RANGES 0:1
set_parameter_property USE_ADDR_USER DISPLAY_HINT "boolean"

# | 
# +-----------------------------------

# +-----------------------------------
# | display items
add_display_item "AXI Slave Interface " ID PARAMETER ""
add_display_item "AXI Slave Interface " ST_DATA_W PARAMETER ""
add_display_item "AXI Slave Interface " ST_CHANNEL_W PARAMETER ""
add_display_item "AXI Slave Interface " ADDR_WIDTH PARAMETER ""
add_display_item "AXI Slave Interface " RDATA_WIDTH PARAMETER ""
add_display_item "AXI Slave Interface " WDATA_WIDTH PARAMETER ""
add_display_item "AXI Slave Interface " USE_ADDR_USER PARAMETER ""
add_display_item "AXI Slave Interface " ADDR_USER_WIDTH PARAMETER ""
add_display_item "AXI Slave Interface " DATA_USER_WIDTH PARAMETER ""
add_display_item "AXI Slave Interface " AXI_SLAVE_ID_W PARAMETER ""
add_display_item "AXI Slave Interface " PASS_ID_TO_SLAVE PARAMETER ""
add_display_item "AXI Slave Interface " AXI_VERSION PARAMETER ""

add_display_item "Transaction Acceptance Capability " WRITE_ACCEPTANCE_CAPABILITY PARAMETER ""
add_display_item "Transaction Acceptance Capability " READ_ACCEPTANCE_CAPABILITY PARAMETER ""

add_display_item "Qsys Packet Format " PKT_QOS_H PARAMETER ""
add_display_item "Qsys Packet Format " PKT_QOS_L PARAMETER ""
add_display_item "Qsys Packet Format " PKT_THREAD_ID_H PARAMETER ""
add_display_item "Qsys Packet Format " PKT_THREAD_ID_L PARAMETER ""
add_display_item "Qsys Packet Format " PKT_RESPONSE_STATUS_H PARAMETER ""
add_display_item "Qsys Packet Format " PKT_RESPONSE_STATUS_L PARAMETER ""
add_display_item "Qsys Packet Format " PKT_BEGIN_BURST PARAMETER ""
add_display_item "Qsys Packet Format " PKT_CACHE_H PARAMETER ""
add_display_item "Qsys Packet Format " PKT_CACHE_L PARAMETER ""
add_display_item "Qsys Packet Format " PKT_DATA_SIDEBAND_H PARAMETER ""
add_display_item "Qsys Packet Format " PKT_DATA_SIDEBAND_L PARAMETER ""
add_display_item "Qsys Packet Format " PKT_ADDR_SIDEBAND_H PARAMETER ""
add_display_item "Qsys Packet Format " PKT_ADDR_SIDEBAND_L PARAMETER ""
add_display_item "Qsys Packet Format " PKT_BURST_TYPE_H PARAMETER ""
add_display_item "Qsys Packet Format " PKT_BURST_TYPE_L PARAMETER ""
add_display_item "Qsys Packet Format " PKT_PROTECTION_H PARAMETER ""
add_display_item "Qsys Packet Format " PKT_PROTECTION_L PARAMETER ""
add_display_item "Qsys Packet Format " PKT_BURST_SIZE_H PARAMETER ""
add_display_item "Qsys Packet Format " PKT_BURST_SIZE_L PARAMETER ""
add_display_item "Qsys Packet Format " PKT_BURSTWRAP_H PARAMETER ""
add_display_item "Qsys Packet Format " PKT_BURSTWRAP_L PARAMETER ""
add_display_item "Qsys Packet Format " PKT_BYTE_CNT_H PARAMETER ""
add_display_item "Qsys Packet Format " PKT_BYTE_CNT_L PARAMETER ""
add_display_item "Qsys Packet Format " PKT_ADDR_H PARAMETER ""
add_display_item "Qsys Packet Format " PKT_ADDR_L PARAMETER ""
add_display_item "Qsys Packet Format " PKT_TRANS_EXCLUSIVE PARAMETER ""
add_display_item "Qsys Packet Format " PKT_TRANS_LOCK PARAMETER ""
add_display_item "Qsys Packet Format " PKT_TRANS_COMPRESSED_READ PARAMETER ""
add_display_item "Qsys Packet Format " PKT_TRANS_POSTED PARAMETER ""
add_display_item "Qsys Packet Format " PKT_TRANS_WRITE PARAMETER ""
add_display_item "Qsys Packet Format " PKT_TRANS_READ PARAMETER ""
add_display_item "Qsys Packet Format " PKT_DATA_H PARAMETER ""
add_display_item "Qsys Packet Format " PKT_DATA_L PARAMETER ""
add_display_item "Qsys Packet Format " PKT_BYTEEN_H PARAMETER ""
add_display_item "Qsys Packet Format " PKT_BYTEEN_L PARAMETER ""
add_display_item "Qsys Packet Format " PKT_SRC_ID_H PARAMETER ""
add_display_item "Qsys Packet Format " PKT_SRC_ID_L PARAMETER ""
add_display_item "Qsys Packet Format " PKT_DEST_ID_H PARAMETER ""
add_display_item "Qsys Packet Format " PKT_DEST_ID_L PARAMETER ""
add_display_item "Qsys Packet Format " PKT_ORI_BURST_SIZE_H PARAMETER ""
add_display_item "Qsys Packet Format " PKT_ORI_BURST_SIZE_L PARAMETER ""

# | 
# | 
# +-----------------------------------

proc elaborate {} {
# parameter values used in ports sizes
set axi_version         [get_parameter_value AXI_VERSION]
set axi_slave_id_width  [get_parameter_value AXI_SLAVE_ID_W]
set addr_width          [get_parameter_value ADDR_WIDTH]
set wdata_width         [get_parameter_value WDATA_WIDTH]
set rdata_width         [get_parameter_value RDATA_WIDTH]
set st_data_width       [get_parameter_value ST_DATA_W]
set st_channel_width    [get_parameter_value ST_CHANNEL_W]
set data_user           [get_parameter_value DATA_USER_WIDTH]
set addr_user           [get_parameter_value ADDR_USER_WIDTH]
set wstrb_width         [ expr [get_parameter_value PKT_BYTEEN_H] - [get_parameter_value PKT_BYTEEN_L] + 1]
set resp_width          2

    if { $axi_version == "AXI3" } {
        set burst_length 4
        set lock_width   2
    } else {
        set burst_length 8
        set lock_width   1
    }   

# +-----------------------------------
# | connection point clock_sink
# |
add_interface clock_sink clock end
set_interface_property clock_sink clockRate 0

set_interface_property clock_sink ENABLED true

add_interface_port clock_sink aclk clk Input 1
# |
# +-----------------------------------

# +-----------------------------------
# | connection point reset_sink
# |
add_interface reset_sink reset end
set_interface_property reset_sink associatedClock "clock_sink"
set_interface_property reset_sink synchronousEdges DEASSERT

set_interface_property reset_sink ENABLED true

add_interface_port reset_sink aresetn reset_n Input 1
# |
# +-----------------------------------   


# +-----------------------------------
# | connection point avalon_streaming_sink_for_reads
# | 
add_interface read_cp avalon_streaming end
set_interface_property read_cp dataBitsPerSymbol $st_data_width
set_interface_property read_cp errorDescriptor ""
set_interface_property read_cp firstSymbolInHighOrderBits true
set_interface_property read_cp maxChannel 0
set_interface_property read_cp readyLatency 0
set_interface_property read_cp associatedClock "clock_sink"
set_interface_property read_cp associatedReset "reset_sink"

set_interface_property read_cp ENABLED true

add_interface_port read_cp read_cp_valid valid Input 1
add_interface_port read_cp read_cp_ready ready Output 1
add_interface_port read_cp read_cp_data data Input $st_data_width
add_interface_port read_cp read_cp_channel channel Input $st_channel_width
add_interface_port read_cp read_cp_startofpacket startofpacket Input 1
add_interface_port read_cp read_cp_endofpacket endofpacket Input 1



# +-----------------------------------
# | connection point avalon_streaming_sink_for_writes
# |   
add_interface write_cp avalon_streaming end
set_interface_property write_cp dataBitsPerSymbol $st_data_width
set_interface_property write_cp errorDescriptor ""
set_interface_property write_cp firstSymbolInHighOrderBits true
set_interface_property write_cp maxChannel 0
set_interface_property write_cp readyLatency 0
set_interface_property write_cp associatedClock "clock_sink"
set_interface_property write_cp associatedReset "reset_sink"
set_interface_property write_cp ENABLED true

add_interface_port write_cp write_cp_ready ready Output 1
add_interface_port write_cp write_cp_valid valid Input 1
add_interface_port write_cp write_cp_data data Input $st_data_width
add_interface_port write_cp write_cp_channel channel Input $st_channel_width
add_interface_port write_cp write_cp_startofpacket startofpacket Input 1
add_interface_port write_cp write_cp_endofpacket endofpacket Input 1

# | 
# +-----------------------------------

# +-----------------------------------
# | connection point avalon_streaming_source_read
# | 
add_interface  read_rp avalon_streaming start
set_interface_property  read_rp dataBitsPerSymbol $st_data_width
set_interface_property  read_rp errorDescriptor ""
set_interface_property  read_rp firstSymbolInHighOrderBits true
set_interface_property  read_rp maxChannel 0
set_interface_property  read_rp readyLatency 0
set_interface_property  read_rp associatedClock "clock_sink"
set_interface_property  read_rp associatedReset "reset_sink"
set_interface_property  read_rp ENABLED true

add_interface_port  read_rp read_rp_ready ready Input 1
add_interface_port  read_rp read_rp_valid valid Output 1
add_interface_port  read_rp read_rp_data data Output $st_data_width
add_interface_port  read_rp read_rp_startofpacket startofpacket Output 1
add_interface_port  read_rp read_rp_endofpacket endofpacket Output 1

# +-----------------------------------
# | connection point avalon_streaming_source_write
# |
add_interface write_rp avalon_streaming start
set_interface_property write_rp dataBitsPerSymbol $st_data_width
set_interface_property write_rp errorDescriptor ""
set_interface_property write_rp firstSymbolInHighOrderBits true
set_interface_property write_rp maxChannel 0
set_interface_property write_rp readyLatency 0
set_interface_property write_rp associatedClock "clock_sink"
set_interface_property write_rp associatedReset "reset_sink"
set_interface_property write_rp ENABLED true 

add_interface_port write_rp write_rp_ready ready Input 1
add_interface_port write_rp write_rp_valid valid Output 1
add_interface_port write_rp write_rp_data data Output $st_data_width
add_interface_port write_rp write_rp_startofpacket startofpacket Output 1
add_interface_port write_rp write_rp_endofpacket endofpacket Output 1
# | 
# +-----------------------------------

# +-----------------------------------
# | connection point altera_axi_master
# | 

if { $axi_version == "AXI3" } {
    add_axi3_interface $axi_slave_id_width $addr_width $wdata_width $rdata_width $data_user $addr_user $wstrb_width $resp_width
} elseif { $axi_version == "AXI4" } {
    add_axi4_interface $axi_slave_id_width $addr_width $wdata_width $rdata_width $data_user $addr_user $wstrb_width $resp_width
} else {
    add_axi4lite_interface $axi_slave_id_width $addr_width $wdata_width $rdata_width $data_user $addr_user $wstrb_width $resp_width
}
	
   set enable_user_signals      [ get_parameter USE_ADDR_USER ]
       if { $enable_user_signals == 0 } {
           set_port_property awuser TERMINATION true
           set_port_property aruser TERMINATION true
       }
       
if { $axi_version == "AXI3" } {
    set_interface_assignment altera_axi_master merlin.flow.read_rp read_rp
    set_interface_assignment altera_axi_master merlin.flow.write_rp write_rp
    set_interface_assignment read_cp merlin.flow.altera_axi_master altera_axi_master
    set_interface_assignment write_cp merlin.flow.altera_axi_master altera_axi_master
} else {
    set_interface_assignment altera_axi_master merlin.flow.read_rp read_rp
    set_interface_assignment altera_axi_master merlin.flow.write_rp write_rp
    set_interface_assignment read_cp merlin.flow.altera_axi_master altera_axi_master
    set_interface_assignment write_cp merlin.flow.altera_axi_master altera_axi_master  
}
# | 
# +-----------------------------------

    set_packet_format write_cp
    set_packet_format write_rp
    set_packet_format read_cp
    set_packet_format read_rp
}

proc validate {} {
		set source_id_width [ expr [get_parameter_value PKT_SRC_ID_H] - [get_parameter_value PKT_SRC_ID_L] + 1]
		set destination_id_width [ expr [get_parameter_value PKT_DEST_ID_H] - [get_parameter_value PKT_DEST_ID_L] + 1]
		set axi_slave_id_width [get_parameter_value AXI_SLAVE_ID_W]

		if {$axi_slave_id_width < $source_id_width || $axi_slave_id_width < $destination_id_width} {
					send_message error "AXI interface ID width is smaller than source/destination id packet width"
		}
}

proc set_packet_format { intf } {
    set_interface_assignment $intf merlin.packet_format [ get_parameter_value MERLIN_PACKET_FORMAT ]
}

proc add_axi3_interface { axi_slave_id_width addr_width wdata_width rdata_width data_user addr_user wstrb_width resp_width } {
    add_interface altera_axi_master axi start
    set_interface_property altera_axi_master associatedClock "clock_sink"
    set_interface_property altera_axi_master associatedReset "reset_sink"
    set_interface_property altera_axi_master maximumOutstandingReads 1
    set_interface_property altera_axi_master maximumOutstandingWrites 1
    set_interface_property altera_axi_master maximumOutstandingTransactions 1
    
    set_interface_property altera_axi_master ENABLED true
    
    add_interface_port altera_axi_master awid awid Output $axi_slave_id_width
    add_interface_port altera_axi_master awaddr awaddr Output $addr_width
    add_interface_port altera_axi_master awlen awlen Output 4
    add_interface_port altera_axi_master awsize awsize Output 3
    add_interface_port altera_axi_master awburst awburst Output 2
    add_interface_port altera_axi_master awlock awlock Output 2
    add_interface_port altera_axi_master awcache awcache Output 4
    add_interface_port altera_axi_master awprot awprot Output 3
    add_interface_port altera_axi_master awuser awuser Output $addr_user
    add_interface_port altera_axi_master awvalid awvalid Output 1
    add_interface_port altera_axi_master awready awready Input 1
    add_interface_port altera_axi_master wid wid Output $axi_slave_id_width
    add_interface_port altera_axi_master wdata wdata Output $wdata_width
    add_interface_port altera_axi_master wstrb wstrb Output $wstrb_width
    add_interface_port altera_axi_master wlast wlast Output 1
    add_interface_port altera_axi_master wvalid wvalid Output 1
    add_interface_port altera_axi_master wready wready Input 1
    add_interface_port altera_axi_master bid bid Input $axi_slave_id_width
    add_interface_port altera_axi_master bresp bresp Input $resp_width
    add_interface_port altera_axi_master bvalid bvalid Input 1
    add_interface_port altera_axi_master bready bready Output 1
    add_interface_port altera_axi_master arid arid Output $axi_slave_id_width
    add_interface_port altera_axi_master araddr araddr Output $addr_width
    add_interface_port altera_axi_master arlen arlen Output 4
    add_interface_port altera_axi_master arsize arsize Output 3
    add_interface_port altera_axi_master arburst arburst Output 2
    add_interface_port altera_axi_master arlock arlock Output 2
    add_interface_port altera_axi_master arcache arcache Output 4
    add_interface_port altera_axi_master arprot arprot Output 3
    add_interface_port altera_axi_master aruser aruser Output $addr_user
    add_interface_port altera_axi_master arvalid arvalid Output 1
    add_interface_port altera_axi_master arready arready Input 1
    add_interface_port altera_axi_master rid rid Input $axi_slave_id_width
    add_interface_port altera_axi_master rdata rdata Input $rdata_width
    add_interface_port altera_axi_master rresp rresp Input $resp_width
    add_interface_port altera_axi_master rlast rlast Input 1
    add_interface_port altera_axi_master rvalid rvalid Input 1
    add_interface_port altera_axi_master rready rready Output 1
}

proc add_axi4_interface { axi_slave_id_width addr_width wdata_width rdata_width data_user addr_user wstrb_width resp_width } {
    set axi_slave_id_width [get_parameter_value AXI_SLAVE_ID_W]
    add_interface altera_axi_master axi4 start
    set_interface_property altera_axi_master associatedClock "clock_sink"
    set_interface_property altera_axi_master associatedReset "reset_sink"
    set_interface_property altera_axi_master maximumOutstandingReads 1
    set_interface_property altera_axi_master maximumOutstandingWrites 1
    set_interface_property altera_axi_master maximumOutstandingTransactions 1
    
    set_interface_property altera_axi_master ENABLED true
    
    add_interface_port altera_axi_master awid awid Output $axi_slave_id_width
    add_interface_port altera_axi_master awaddr awaddr Output $addr_width
    add_interface_port altera_axi_master awlen awlen Output 8
    add_interface_port altera_axi_master awsize awsize Output 3
    add_interface_port altera_axi_master awburst awburst Output 2
    add_interface_port altera_axi_master awlock awlock Output 1
    add_interface_port altera_axi_master awcache awcache Output 4
    add_interface_port altera_axi_master awprot awprot Output 3
    add_interface_port altera_axi_master awuser awuser Output $addr_user
    add_interface_port altera_axi_master awvalid awvalid Output 1
    add_interface_port altera_axi_master awready awready Input 1
    add_interface_port altera_axi_master wdata wdata Output $wdata_width
    add_interface_port altera_axi_master wstrb wstrb Output $wstrb_width
    add_interface_port altera_axi_master wlast wlast Output 1
    add_interface_port altera_axi_master wvalid wvalid Output 1
    add_interface_port altera_axi_master wready wready Input 1
    add_interface_port altera_axi_master bid bid Input $axi_slave_id_width
    add_interface_port altera_axi_master bresp bresp Input $resp_width
    add_interface_port altera_axi_master bvalid bvalid Input 1
    add_interface_port altera_axi_master bready bready Output 1
    add_interface_port altera_axi_master arid arid Output $axi_slave_id_width
    add_interface_port altera_axi_master araddr araddr Output $addr_width
    add_interface_port altera_axi_master arlen arlen Output 8
    add_interface_port altera_axi_master arsize arsize Output 3
    add_interface_port altera_axi_master arburst arburst Output 2
    add_interface_port altera_axi_master arlock arlock Output 1
    add_interface_port altera_axi_master arcache arcache Output 4
    add_interface_port altera_axi_master arprot arprot Output 3
    add_interface_port altera_axi_master aruser aruser Output $addr_user
    add_interface_port altera_axi_master arvalid arvalid Output 1
    add_interface_port altera_axi_master arready arready Input 1
    add_interface_port altera_axi_master rid rid Input $axi_slave_id_width
    add_interface_port altera_axi_master rdata rdata Input $rdata_width
    add_interface_port altera_axi_master rresp rresp Input $resp_width
    add_interface_port altera_axi_master rlast rlast Input 1
    add_interface_port altera_axi_master rvalid rvalid Input 1
    add_interface_port altera_axi_master rready rready Output 1
    
    # | AXI 4 interfaces - will be added into the component, terminate by AXI Translator when its not used
    add_interface_port altera_axi_master wuser wuser Output $data_user
    add_interface_port altera_axi_master awqos awqos Output 4
    add_interface_port altera_axi_master awregion awregion Output 4
    add_interface_port altera_axi_master ruser ruser Input  $data_user
    add_interface_port altera_axi_master buser buser Input  $data_user
    add_interface_port altera_axi_master arqos arqos Output 4
    add_interface_port altera_axi_master arregion arregion Output 4
}
proc add_axi4lite_interface { axi_slave_id_width addr_width wdata_width rdata_width data_user addr_user wstrb_width resp_width } {
    add_interface altera_axi_master axi4lite start
    set_interface_property altera_axi_master associatedClock "clock_sink"
    set_interface_property altera_axi_master associatedReset "reset_sink"
    set_interface_property altera_axi_master maximumOutstandingReads 1
    set_interface_property altera_axi_master maximumOutstandingWrites 1
    set_interface_property altera_axi_master maximumOutstandingTransactions 1
    set_interface_property altera_axi_master ENABLED true

    add_interface_port altera_axi_master awaddr awaddr Output $addr_width
    add_interface_port altera_axi_master awprot awprot Output 3
    add_interface_port altera_axi_master awvalid awvalid Output 1
    add_interface_port altera_axi_master awready awready Input 1
    add_interface_port altera_axi_master wdata wdata Output $wdata_width
    add_interface_port altera_axi_master wstrb wstrb Output $wstrb_width
    add_interface_port altera_axi_master wvalid wvalid Output 1
    add_interface_port altera_axi_master wready wready Input 1
    add_interface_port altera_axi_master bresp bresp Input $resp_width
    add_interface_port altera_axi_master bvalid bvalid Input 1
    add_interface_port altera_axi_master bready bready Output 1
    add_interface_port altera_axi_master araddr araddr Output $addr_width
    add_interface_port altera_axi_master arprot arprot Output 3
    add_interface_port altera_axi_master arvalid arvalid Output 1
    add_interface_port altera_axi_master arready arready Input 1
    add_interface_port altera_axi_master rdata rdata Input $rdata_width
    add_interface_port altera_axi_master rresp rresp Input $resp_width
    add_interface_port altera_axi_master rvalid rvalid Input 1
    add_interface_port altera_axi_master rready rready Output 1
}